<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Histopathology QC</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Histopathology QC_files/libs/clipboard/clipboard.min.js"></script>
<script src="Histopathology QC_files/libs/quarto-html/quarto.js"></script>
<script src="Histopathology QC_files/libs/quarto-html/popper.min.js"></script>
<script src="Histopathology QC_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Histopathology QC_files/libs/quarto-html/anchor.min.js"></script>
<link href="Histopathology QC_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Histopathology QC_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Histopathology QC_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Histopathology QC_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Histopathology QC_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#packages" id="toc-packages" class="nav-link active" data-scroll-target="#packages">Packages</a></li>
  <li><a href="#read-in-data" id="toc-read-in-data" class="nav-link" data-scroll-target="#read-in-data">Read in Data</a></li>
  <li><a href="#label-data" id="toc-label-data" class="nav-link" data-scroll-target="#label-data">Label Data</a></li>
  <li><a href="#functions" id="toc-functions" class="nav-link" data-scroll-target="#functions">Functions</a></li>
  <li><a href="#qc" id="toc-qc" class="nav-link" data-scroll-target="#qc">QC</a>
  <ul>
  <li><a href="#section" id="toc-section" class="nav-link" data-scroll-target="#section"></a></li>
  <li><a href="#general-analysis" id="toc-general-analysis" class="nav-link" data-scroll-target="#general-analysis">General Analysis</a>
  <ul>
  <li><a href="#section-1" id="toc-section-1" class="nav-link" data-scroll-target="#section-1"></a></li>
  <li><a href="#data-structure" id="toc-data-structure" class="nav-link" data-scroll-target="#data-structure">Data Structure</a></li>
  <li><a href="#section-2" id="toc-section-2" class="nav-link" data-scroll-target="#section-2"></a></li>
  <li><a href="#missing-codes" id="toc-missing-codes" class="nav-link" data-scroll-target="#missing-codes">Missing Codes</a></li>
  <li><a href="#section-3" id="toc-section-3" class="nav-link" data-scroll-target="#section-3"></a></li>
  <li><a href="#crosscheck-errors" id="toc-crosscheck-errors" class="nav-link" data-scroll-target="#crosscheck-errors">Crosscheck Errors</a></li>
  <li><a href="#section-4" id="toc-section-4" class="nav-link" data-scroll-target="#section-4"></a></li>
  </ul></li>
  <li><a href="#variable-check" id="toc-variable-check" class="nav-link" data-scroll-target="#variable-check">Variable Check</a>
  <ul>
  <li><a href="#section-5" id="toc-section-5" class="nav-link" data-scroll-target="#section-5"></a></li>
  </ul></li>
  <li><a href="#specimen" id="toc-specimen" class="nav-link" data-scroll-target="#specimen">Specimen</a>
  <ul>
  <li><a href="#section-6" id="toc-section-6" class="nav-link" data-scroll-target="#section-6"></a></li>
  <li><a href="#side" id="toc-side" class="nav-link" data-scroll-target="#side">Side</a></li>
  <li><a href="#section-7" id="toc-section-7" class="nav-link" data-scroll-target="#section-7"></a></li>
  <li><a href="#tumourcount" id="toc-tumourcount" class="nav-link" data-scroll-target="#tumourcount">TumourCount</a></li>
  <li><a href="#section-8" id="toc-section-8" class="nav-link" data-scroll-target="#section-8"></a></li>
  <li><a href="#screendetected" id="toc-screendetected" class="nav-link" data-scroll-target="#screendetected">ScreenDetected</a></li>
  <li><a href="#section-9" id="toc-section-9" class="nav-link" data-scroll-target="#section-9"></a></li>
  <li><a href="#specimentype" id="toc-specimentype" class="nav-link" data-scroll-target="#specimentype">SpecimenType</a></li>
  <li><a href="#section-10" id="toc-section-10" class="nav-link" data-scroll-target="#section-10"></a></li>
  <li><a href="#specimenweight" id="toc-specimenweight" class="nav-link" data-scroll-target="#specimenweight">SpecimenWeight</a></li>
  <li><a href="#section-11" id="toc-section-11" class="nav-link" data-scroll-target="#section-11"></a></li>
  <li><a href="#axillaryprocedure" id="toc-axillaryprocedure" class="nav-link" data-scroll-target="#axillaryprocedure">AxillaryProcedure</a></li>
  <li><a href="#section-12" id="toc-section-12" class="nav-link" data-scroll-target="#section-12"></a></li>
  <li><a href="#postneoadjuvantchemo" id="toc-postneoadjuvantchemo" class="nav-link" data-scroll-target="#postneoadjuvantchemo">PostNeoadjuvantChemo</a></li>
  <li><a href="#section-13" id="toc-section-13" class="nav-link" data-scroll-target="#section-13"></a></li>
  </ul></li>
  <li><a href="#in-situ-lesion" id="toc-in-situ-lesion" class="nav-link" data-scroll-target="#in-situ-lesion">In Situ Lesion</a>
  <ul>
  <li><a href="#section-14" id="toc-section-14" class="nav-link" data-scroll-target="#section-14"></a></li>
  <li><a href="#insitucarcinoma" id="toc-insitucarcinoma" class="nav-link" data-scroll-target="#insitucarcinoma">InsituCarcinoma</a></li>
  <li><a href="#section-15" id="toc-section-15" class="nav-link" data-scroll-target="#section-15"></a></li>
  <li><a href="#ductalcarcinomainsitu" id="toc-ductalcarcinomainsitu" class="nav-link" data-scroll-target="#ductalcarcinomainsitu">DuctalCarcinomaInSitu</a></li>
  <li><a href="#section-16" id="toc-section-16" class="nav-link" data-scroll-target="#section-16"></a></li>
  <li><a href="#dcisgrade" id="toc-dcisgrade" class="nav-link" data-scroll-target="#dcisgrade">DCISGrade</a></li>
  <li><a href="#section-17" id="toc-section-17" class="nav-link" data-scroll-target="#section-17"></a></li>
  <li><a href="#solid_dcisgp" id="toc-solid_dcisgp" class="nav-link" data-scroll-target="#solid_dcisgp">Solid_DCISGP</a></li>
  <li><a href="#section-18" id="toc-section-18" class="nav-link" data-scroll-target="#section-18"></a></li>
  <li><a href="#cribiform_dcisgp" id="toc-cribiform_dcisgp" class="nav-link" data-scroll-target="#cribiform_dcisgp">Cribiform_DCISGP</a></li>
  <li><a href="#section-19" id="toc-section-19" class="nav-link" data-scroll-target="#section-19"></a></li>
  <li><a href="#micropapillary_dcisgp" id="toc-micropapillary_dcisgp" class="nav-link" data-scroll-target="#micropapillary_dcisgp">Micropapillary_DCISGP</a></li>
  <li><a href="#section-20" id="toc-section-20" class="nav-link" data-scroll-target="#section-20"></a></li>
  <li><a href="#papillary_dcisgp" id="toc-papillary_dcisgp" class="nav-link" data-scroll-target="#papillary_dcisgp">Papillary_DCISGP</a></li>
  <li><a href="#section-21" id="toc-section-21" class="nav-link" data-scroll-target="#section-21"></a></li>
  <li><a href="#apocrine_dcisgp" id="toc-apocrine_dcisgp" class="nav-link" data-scroll-target="#apocrine_dcisgp">Apocrine_DCISGP</a></li>
  <li><a href="#section-22" id="toc-section-22" class="nav-link" data-scroll-target="#section-22"></a></li>
  <li><a href="#flat_dcisgp" id="toc-flat_dcisgp" class="nav-link" data-scroll-target="#flat_dcisgp">Flat_DCISGP</a></li>
  <li><a href="#section-23" id="toc-section-23" class="nav-link" data-scroll-target="#section-23"></a></li>
  <li><a href="#comedo_dcisgp" id="toc-comedo_dcisgp" class="nav-link" data-scroll-target="#comedo_dcisgp">Comedo_DCISGP</a></li>
  <li><a href="#section-24" id="toc-section-24" class="nav-link" data-scroll-target="#section-24"></a></li>
  <li><a href="#clinging" id="toc-clinging" class="nav-link" data-scroll-target="#clinging">Clinging</a></li>
  <li><a href="#section-25" id="toc-section-25" class="nav-link" data-scroll-target="#section-25"></a></li>
  <li><a href="#comedonecrosis" id="toc-comedonecrosis" class="nav-link" data-scroll-target="#comedonecrosis">ComedoNecrosis</a></li>
  <li><a href="#section-26" id="toc-section-26" class="nav-link" data-scroll-target="#section-26"></a></li>
  <li><a href="#sizedcisonly" id="toc-sizedcisonly" class="nav-link" data-scroll-target="#sizedcisonly">SizeDCISOnly</a></li>
  <li><a href="#section-27" id="toc-section-27" class="nav-link" data-scroll-target="#section-27"></a></li>
  <li><a href="#lobularcarcinomainsitu" id="toc-lobularcarcinomainsitu" class="nav-link" data-scroll-target="#lobularcarcinomainsitu">LobularCarcinomaInsitu</a></li>
  <li><a href="#section-28" id="toc-section-28" class="nav-link" data-scroll-target="#section-28"></a></li>
  <li><a href="#pleomorphiclcis" id="toc-pleomorphiclcis" class="nav-link" data-scroll-target="#pleomorphiclcis">PleomorphicLCIS</a></li>
  <li><a href="#section-29" id="toc-section-29" class="nav-link" data-scroll-target="#section-29"></a></li>
  <li><a href="#pagetsdisease" id="toc-pagetsdisease" class="nav-link" data-scroll-target="#pagetsdisease">PagetsDisease</a></li>
  <li><a href="#section-30" id="toc-section-30" class="nav-link" data-scroll-target="#section-30"></a></li>
  <li><a href="#microinvasion" id="toc-microinvasion" class="nav-link" data-scroll-target="#microinvasion">Microinvasion</a></li>
  <li><a href="#section-31" id="toc-section-31" class="nav-link" data-scroll-target="#section-31"></a></li>
  </ul></li>
  <li><a href="#invasive-carcinoma" id="toc-invasive-carcinoma" class="nav-link" data-scroll-target="#invasive-carcinoma">Invasive Carcinoma</a>
  <ul>
  <li><a href="#section-32" id="toc-section-32" class="nav-link" data-scroll-target="#section-32"></a></li>
  <li><a href="#invasivecarcinoma" id="toc-invasivecarcinoma" class="nav-link" data-scroll-target="#invasivecarcinoma">InvasiveCarcinoma</a></li>
  <li><a href="#section-33" id="toc-section-33" class="nav-link" data-scroll-target="#section-33"></a></li>
  <li><a href="#sizeinvasivetumour" id="toc-sizeinvasivetumour" class="nav-link" data-scroll-target="#sizeinvasivetumour">SizeInvasiveTumour</a></li>
  <li><a href="#section-34" id="toc-section-34" class="nav-link" data-scroll-target="#section-34"></a></li>
  <li><a href="#sizewholetumour" id="toc-sizewholetumour" class="nav-link" data-scroll-target="#sizewholetumour">SizeWholeTumour</a></li>
  <li><a href="#section-35" id="toc-section-35" class="nav-link" data-scroll-target="#section-35"></a></li>
  <li><a href="#type" id="toc-type" class="nav-link" data-scroll-target="#type">Type</a></li>
  <li><a href="#section-36" id="toc-section-36" class="nav-link" data-scroll-target="#section-36"></a></li>
  <li><a href="#typecomponent" id="toc-typecomponent" class="nav-link" data-scroll-target="#typecomponent">TypeComponent</a></li>
  <li><a href="#section-37" id="toc-section-37" class="nav-link" data-scroll-target="#section-37"></a></li>
  <li><a href="#invasivegrade" id="toc-invasivegrade" class="nav-link" data-scroll-target="#invasivegrade">InvasiveGrade</a></li>
  <li><a href="#section-38" id="toc-section-38" class="nav-link" data-scroll-target="#section-38"></a></li>
  <li><a href="#tubules" id="toc-tubules" class="nav-link" data-scroll-target="#tubules">Tubules</a></li>
  <li><a href="#section-39" id="toc-section-39" class="nav-link" data-scroll-target="#section-39"></a></li>
  <li><a href="#pleomorphism" id="toc-pleomorphism" class="nav-link" data-scroll-target="#pleomorphism">Pleomorphism</a></li>
  <li><a href="#section-40" id="toc-section-40" class="nav-link" data-scroll-target="#section-40"></a></li>
  <li><a href="#mitoticactivity" id="toc-mitoticactivity" class="nav-link" data-scroll-target="#mitoticactivity">MitoticActivity</a></li>
  <li><a href="#section-41" id="toc-section-41" class="nav-link" data-scroll-target="#section-41"></a></li>
  <li><a href="#tumourextent" id="toc-tumourextent" class="nav-link" data-scroll-target="#tumourextent">TumourExtent</a></li>
  </ul></li>
  <li><a href="#lymph-nodes" id="toc-lymph-nodes" class="nav-link" data-scroll-target="#lymph-nodes">Lymph Nodes</a>
  <ul>
  <li><a href="#section-42" id="toc-section-42" class="nav-link" data-scroll-target="#section-42"></a></li>
  <li><a href="#vascularinvasion" id="toc-vascularinvasion" class="nav-link" data-scroll-target="#vascularinvasion">VascularInvasion</a></li>
  <li><a href="#section-43" id="toc-section-43" class="nav-link" data-scroll-target="#section-43"></a></li>
  <li><a href="#axillarynodespresent" id="toc-axillarynodespresent" class="nav-link" data-scroll-target="#axillarynodespresent">AxillaryNodesPresent</a></li>
  <li><a href="#section-44" id="toc-section-44" class="nav-link" data-scroll-target="#section-44"></a></li>
  <li><a href="#axillarynodestotal" id="toc-axillarynodestotal" class="nav-link" data-scroll-target="#axillarynodestotal">AxillaryNodesTotal</a></li>
  <li><a href="#section-45" id="toc-section-45" class="nav-link" data-scroll-target="#section-45"></a></li>
  <li><a href="#axillarynodespositive" id="toc-axillarynodespositive" class="nav-link" data-scroll-target="#axillarynodespositive">AxillaryNodesPositive</a></li>
  <li><a href="#section-46" id="toc-section-46" class="nav-link" data-scroll-target="#section-46"></a></li>
  <li><a href="#singlenodepositivity" id="toc-singlenodepositivity" class="nav-link" data-scroll-target="#singlenodepositivity">SingleNodePositivity</a></li>
  <li><a href="#section-47" id="toc-section-47" class="nav-link" data-scroll-target="#section-47"></a></li>
  <li><a href="#othernodespresent" id="toc-othernodespresent" class="nav-link" data-scroll-target="#othernodespresent">OtherNodesPresent</a></li>
  <li><a href="#section-48" id="toc-section-48" class="nav-link" data-scroll-target="#section-48"></a></li>
  <li><a href="#othernodestotal" id="toc-othernodestotal" class="nav-link" data-scroll-target="#othernodestotal">OtherNodesTotal</a></li>
  <li><a href="#section-49" id="toc-section-49" class="nav-link" data-scroll-target="#section-49"></a></li>
  <li><a href="#othernodespositive" id="toc-othernodespositive" class="nav-link" data-scroll-target="#othernodespositive">OtherNodesPositive</a></li>
  <li><a href="#section-50" id="toc-section-50" class="nav-link" data-scroll-target="#section-50"></a></li>
  </ul></li>
  <li><a href="#tnm-stage" id="toc-tnm-stage" class="nav-link" data-scroll-target="#tnm-stage">TNM Stage</a>
  <ul>
  <li><a href="#section-51" id="toc-section-51" class="nav-link" data-scroll-target="#section-51"></a></li>
  <li><a href="#tstage" id="toc-tstage" class="nav-link" data-scroll-target="#tstage">Tstage</a></li>
  <li><a href="#section-52" id="toc-section-52" class="nav-link" data-scroll-target="#section-52"></a></li>
  <li><a href="#nstage" id="toc-nstage" class="nav-link" data-scroll-target="#nstage">NStage</a></li>
  <li><a href="#section-53" id="toc-section-53" class="nav-link" data-scroll-target="#section-53"></a></li>
  <li><a href="#mstage" id="toc-mstage" class="nav-link" data-scroll-target="#mstage">MStage</a></li>
  <li><a href="#section-54" id="toc-section-54" class="nav-link" data-scroll-target="#section-54"></a></li>
  </ul></li>
  <li><a href="#excision-status" id="toc-excision-status" class="nav-link" data-scroll-target="#excision-status">Excision Status</a>
  <ul>
  <li><a href="#section-55" id="toc-section-55" class="nav-link" data-scroll-target="#section-55"></a></li>
  <li><a href="#excisionmargin" id="toc-excisionmargin" class="nav-link" data-scroll-target="#excisionmargin">ExcisionMargin</a></li>
  <li><a href="#section-56" id="toc-section-56" class="nav-link" data-scroll-target="#section-56"></a></li>
  <li><a href="#closestrelevantmargin" id="toc-closestrelevantmargin" class="nav-link" data-scroll-target="#closestrelevantmargin">ClosestRelevantMargin</a></li>
  <li><a href="#section-57" id="toc-section-57" class="nav-link" data-scroll-target="#section-57"></a></li>
  <li><a href="#er_status" id="toc-er_status" class="nav-link" data-scroll-target="#er_status">ER_Status</a></li>
  <li><a href="#section-58" id="toc-section-58" class="nav-link" data-scroll-target="#section-58"></a></li>
  <li><a href="#er_type" id="toc-er_type" class="nav-link" data-scroll-target="#er_type">ER_Type</a></li>
  <li><a href="#section-59" id="toc-section-59" class="nav-link" data-scroll-target="#section-59"></a></li>
  <li><a href="#pr_status" id="toc-pr_status" class="nav-link" data-scroll-target="#pr_status">PR_Status</a></li>
  <li><a href="#section-60" id="toc-section-60" class="nav-link" data-scroll-target="#section-60"></a></li>
  <li><a href="#pr_type" id="toc-pr_type" class="nav-link" data-scroll-target="#pr_type">PR_Type</a></li>
  <li><a href="#section-61" id="toc-section-61" class="nav-link" data-scroll-target="#section-61"></a></li>
  <li><a href="#her2_status" id="toc-her2_status" class="nav-link" data-scroll-target="#her2_status">HER2_Status</a></li>
  <li><a href="#section-62" id="toc-section-62" class="nav-link" data-scroll-target="#section-62"></a></li>
  <li><a href="#her2_score" id="toc-her2_score" class="nav-link" data-scroll-target="#her2_score">HER2_Score</a></li>
  <li><a href="#section-63" id="toc-section-63" class="nav-link" data-scroll-target="#section-63"></a></li>
  <li><a href="#her2_fish" id="toc-her2_fish" class="nav-link" data-scroll-target="#her2_fish">HER2_FISH</a></li>
  <li><a href="#section-64" id="toc-section-64" class="nav-link" data-scroll-target="#section-64"></a></li>
  <li><a href="#ck56_status" id="toc-ck56_status" class="nav-link" data-scroll-target="#ck56_status">CK56_Status</a></li>
  <li><a href="#section-65" id="toc-section-65" class="nav-link" data-scroll-target="#section-65"></a></li>
  <li><a href="#ck56_type" id="toc-ck56_type" class="nav-link" data-scroll-target="#ck56_type">CK56_Type</a></li>
  <li><a href="#section-66" id="toc-section-66" class="nav-link" data-scroll-target="#section-66"></a></li>
  <li><a href="#ki67" id="toc-ki67" class="nav-link" data-scroll-target="#ki67">Ki67</a></li>
  <li><a href="#section-67" id="toc-section-67" class="nav-link" data-scroll-target="#section-67"></a></li>
  <li><a href="#icdmorphologycode" id="toc-icdmorphologycode" class="nav-link" data-scroll-target="#icdmorphologycode">ICDMorphologyCode</a></li>
  <li><a href="#section-68" id="toc-section-68" class="nav-link" data-scroll-target="#section-68"></a></li>
  <li><a href="#brca1" id="toc-brca1" class="nav-link" data-scroll-target="#brca1">BrCa1</a></li>
  <li><a href="#section-69" id="toc-section-69" class="nav-link" data-scroll-target="#section-69"></a></li>
  <li><a href="#brca2" id="toc-brca2" class="nav-link" data-scroll-target="#brca2">BrCa2</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Histopathology QC</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>This code is to assess the quality of the histopathology data and to indicate changes where needed.</p>
<section id="packages" class="level2">
<h2 class="anchored" data-anchor-id="packages">Packages</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>packages <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"tidyverse"</span>, <span class="st">"summarytools"</span>, <span class="st">"readxl"</span>, <span class="st">"dplyr"</span>, <span class="st">"gt"</span>, <span class="st">"tidyr"</span>, <span class="st">"rlang"</span>, <span class="st">"purrr"</span>, <span class="st">"igraph"</span>, <span class="st">"Hmisc"</span>, <span class="st">"knitr"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>not_installed_packages <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(packages, <span class="fu">installed.packages</span>())</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(not_installed_packages)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(summarytools)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rlang)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(Hmisc)</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="read-in-data" class="level2">
<h2 class="anchored" data-anchor-id="read-in-data">Read in Data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"C:/Users/rfrost/Documents/Misc/Histopathology QC"</span>) <span class="do">###CHANGE THIS CODE TO FIT YOUR NEEDS</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>hpdata <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"R:/CoreData/v20230927/RDSHistopath_BrCa_GS_QC.csv"</span>, <span class="at">na.strings =</span> <span class="st">"NULL"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>datadict <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"C:/Users/rfrost/OneDrive - The Institute of Cancer Research/Temporary Histopathology data and DD/Histopath DD - LLM - Reuben.xlsx"</span>, <span class="at">na =</span> <span class="st">"NULL"</span>) <span class="do">###I PATHED THIS FOLDER TO MY ONEDRIVE - ALSO CHANGE TO FIT NEEDS</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="do">#### TEMPORARY CODE TO SWTICH VARIABLE TYPES</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>datadict<span class="sc">$</span>Datatype[datadict<span class="sc">$</span>Datatype<span class="sc">==</span><span class="st">"int"</span><span class="sc">&amp;!</span><span class="fu">is.na</span>(datadict<span class="sc">$</span>Code)] <span class="ot">&lt;-</span> <span class="st">"tempcat"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="label-data" class="level2">
<h2 class="anchored" data-anchor-id="label-data">Label Data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>dd_variables <span class="ot">&lt;-</span> datadict<span class="sc">$</span>FieldName[<span class="sc">!</span><span class="fu">is.na</span>(datadict<span class="sc">$</span>FieldName)]</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>dd_labels <span class="ot">&lt;-</span> datadict<span class="sc">$</span>FieldDesc[<span class="sc">!</span><span class="fu">is.na</span>(datadict<span class="sc">$</span>FieldDesc)]</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(dd_labels) <span class="ot">&lt;-</span> dd_variables</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>hpdata <span class="ot">&lt;-</span> hpdata <span class="sc">|&gt;</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  Hmisc<span class="sc">::</span><span class="fu">upData</span>(<span class="at">labels =</span> dd_labels)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="functions" class="level2">
<h2 class="anchored" data-anchor-id="functions">Functions</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>get_missing_factors <span class="ot">&lt;-</span> <span class="cf">function</span>(varname, <span class="at">df =</span> hpdata, <span class="at">dict=</span>datadict){ <span class="co">#Function to get codes that aren't listed in the dictionary, but are present in the dataset.</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  first_row <span class="ot">&lt;-</span> <span class="fu">which</span>(dict<span class="sc">$</span>FieldName<span class="sc">==</span>varname)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">length</span>(first_row)<span class="sc">==</span><span class="dv">0</span>){</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"Variable not in Data Dictionary"</span>)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    dict2 <span class="ot">&lt;-</span> dict[first_row<span class="sc">:</span><span class="fu">nrow</span>(dict),]</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    last_row <span class="ot">&lt;-</span> <span class="fu">min</span>(<span class="fu">min</span>(<span class="fu">which</span>(<span class="sc">!</span><span class="fu">is.na</span>(dict2<span class="sc">$</span>FieldName))[<span class="sc">-</span><span class="dv">1</span>])<span class="sc">-</span><span class="dv">1</span>, <span class="fu">nrow</span>(dict2))</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    dict_var <span class="ot">&lt;-</span> dict2[<span class="dv">1</span><span class="sc">:</span>last_row,] <span class="co">#Extracting section of dictionary relevant to the variable of interest</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    dict_codes <span class="ot">&lt;-</span> dict_var<span class="sc">$</span>Code <span class="co">#Getting possible codes for variable</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    df_codes <span class="ot">&lt;-</span> <span class="fu">unique</span>(df[,<span class="fu">colnames</span>(df)<span class="sc">==</span>varname])</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    df_codes <span class="ot">&lt;-</span> df_codes[<span class="sc">!</span><span class="fu">is.na</span>(df_codes)] <span class="co">#Getting codes in the dataset</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    missing_codes <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(df_codes, dict_codes) <span class="co">#Seeing what codes are missing from the data dictionary that are in the dataset</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">length</span>(missing_codes)<span class="sc">&gt;</span><span class="dv">0</span>){</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="fu">paste</span>(<span class="fu">length</span>(missing_codes), <span class="st">"Missing Codes"</span>), <span class="fu">paste</span>(<span class="st">"Missing Codes:"</span>, <span class="fu">paste</span>(missing_codes, <span class="at">collapse =</span> <span class="st">", "</span>)), <span class="at">sep =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="st">"No Missing Codes"</span>)</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>get_missing_factors_raw <span class="ot">&lt;-</span> <span class="cf">function</span>(varname, <span class="at">df =</span> hpdata, <span class="at">dict=</span>datadict){ <span class="co">#Raw missing factors code that removes unecessary output for use in quickly grabbing all missing codes.</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>  first_row <span class="ot">&lt;-</span> <span class="fu">which</span>(dict<span class="sc">$</span>FieldName<span class="sc">==</span>varname)</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>  dict2 <span class="ot">&lt;-</span> dict[first_row<span class="sc">:</span><span class="fu">nrow</span>(dict),]</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>  last_row <span class="ot">&lt;-</span> <span class="fu">min</span>(<span class="fu">min</span>(<span class="fu">which</span>(<span class="sc">!</span><span class="fu">is.na</span>(dict2<span class="sc">$</span>FieldName))[<span class="sc">-</span><span class="dv">1</span>])<span class="sc">-</span><span class="dv">1</span>, <span class="fu">nrow</span>(dict2))</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>  dict_var <span class="ot">&lt;-</span> dict2[<span class="dv">1</span><span class="sc">:</span>last_row,]</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>  dict_codes <span class="ot">&lt;-</span> dict_var<span class="sc">$</span>Code</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>  df_codes <span class="ot">&lt;-</span> <span class="fu">unique</span>(df[,<span class="fu">colnames</span>(df)<span class="sc">==</span>varname])</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>  df_codes <span class="ot">&lt;-</span> df_codes[<span class="sc">!</span><span class="fu">is.na</span>(df_codes)]</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>  missing_codes <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(df_codes, dict_codes)</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(missing_codes)</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>get_crosscheck_errors <span class="ot">&lt;-</span> <span class="cf">function</span>(varname, <span class="at">df =</span> hpdata, <span class="at">dict=</span>datadict){ <span class="co">#Code to get crosscheck errors for a specific variable</span></span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>  first_row <span class="ot">&lt;-</span> <span class="fu">which</span>(dict<span class="sc">$</span>FieldName<span class="sc">==</span>varname)</span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>  dict2 <span class="ot">&lt;-</span> dict[first_row<span class="sc">:</span><span class="fu">nrow</span>(dict),]</span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>  last_row <span class="ot">&lt;-</span> <span class="fu">min</span>(<span class="fu">min</span>(<span class="fu">which</span>(<span class="sc">!</span><span class="fu">is.na</span>(dict2<span class="sc">$</span>FieldName))[<span class="sc">-</span><span class="dv">1</span>])<span class="sc">-</span><span class="dv">1</span>, <span class="fu">nrow</span>(dict2))</span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>  dict_var <span class="ot">&lt;-</span> dict2[<span class="dv">1</span><span class="sc">:</span>last_row,]</span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>  dict_var <span class="ot">&lt;-</span> dict_var[<span class="sc">!</span><span class="fu">is.na</span>(dict_var<span class="sc">$</span>Variable_Value),] <span class="co">#Extracting section of dictionary relevant to the variable of interest</span></span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>  invalid_totals <span class="ot">&lt;-</span> <span class="fu">pmap_dfr</span>(dict_var, cross_check, <span class="at">df1 =</span> df) <span class="co">#Applying crosscheck function to every rule that applies to the variable.</span></span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>  invalid_totals <span class="ot">&lt;-</span> invalid_totals[invalid_totals<span class="sc">$</span>total<span class="sc">&gt;</span><span class="dv">0</span>,]</span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">nrow</span>(invalid_totals)<span class="sc">&gt;</span><span class="dv">0</span>){</span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_len</span>(<span class="fu">nrow</span>(invalid_totals))) {</span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(invalid_totals<span class="sc">$</span>total[i]<span class="sc">&lt;</span><span class="dv">10</span>){</span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a>        <span class="fu">cat</span>(<span class="fu">paste</span>(invalid_totals<span class="sc">$</span>total[i], <span class="st">"Invalid Values where"</span>, invalid_totals<span class="sc">$</span>Comment[i]), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>) <span class="co">#If there are mistakes, report number and TCodes for investigation. Only for reasonable number of errors.</span></span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a>        <span class="fu">cat</span>(<span class="st">"Invalid Codes:"</span>, invalid_totals<span class="sc">$</span>codes[i], <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>)</span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a>      } <span class="cf">else</span> {</span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a>        <span class="fu">cat</span>(<span class="fu">paste</span>(invalid_totals<span class="sc">$</span>total[i], <span class="st">"Invalid Values where"</span>, invalid_totals<span class="sc">$</span>Comment[i]), <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>) <span class="co">#If many errors, only print the number instead of all the T Codes.</span></span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"No Invalid Values"</span>)</span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-55"><a href="#cb4-55" aria-hidden="true" tabindex="-1"></a>total_crosscheck_errors <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">df =</span> hpdata, <span class="at">dict=</span>datadict){ <span class="co">#Similar function to above but doesn't subset variable data dict and simply goes through all crosschecks. Useful for quickly seeing errors.</span></span>
<span id="cb4-56"><a href="#cb4-56" aria-hidden="true" tabindex="-1"></a>  invalid_totals <span class="ot">&lt;-</span> <span class="fu">pmap_dfr</span>(dict, cross_check, <span class="at">df1 =</span> df)</span>
<span id="cb4-57"><a href="#cb4-57" aria-hidden="true" tabindex="-1"></a>  invalid_totals <span class="ot">&lt;-</span> invalid_totals[invalid_totals<span class="sc">$</span>total<span class="sc">&gt;</span><span class="dv">0</span>,]</span>
<span id="cb4-58"><a href="#cb4-58" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">nrow</span>(invalid_totals)<span class="sc">&gt;</span><span class="dv">0</span>){</span>
<span id="cb4-59"><a href="#cb4-59" aria-hidden="true" tabindex="-1"></a>    max_errors <span class="ot">&lt;-</span> <span class="fu">max</span>(invalid_totals<span class="sc">$</span>total) <span class="co">#A few lines to initialise table for .csv output.</span></span>
<span id="cb4-60"><a href="#cb4-60" aria-hidden="true" tabindex="-1"></a>    new_columns <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"Code_"</span>, <span class="dv">1</span><span class="sc">:</span>max_errors)</span>
<span id="cb4-61"><a href="#cb4-61" aria-hidden="true" tabindex="-1"></a>    invalid_totals[,new_columns] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb4-62"><a href="#cb4-62" aria-hidden="true" tabindex="-1"></a>    code_list <span class="ot">&lt;-</span> <span class="fu">str_split</span>(invalid_totals<span class="sc">$</span>codes, <span class="at">pattern =</span> <span class="st">", "</span>)</span>
<span id="cb4-63"><a href="#cb4-63" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_len</span>(<span class="fu">nrow</span>(invalid_totals))) {</span>
<span id="cb4-64"><a href="#cb4-64" aria-hidden="true" tabindex="-1"></a>      invalid_totals[i,<span class="dv">4</span><span class="sc">:</span>(invalid_totals<span class="sc">$</span>total[i]<span class="sc">+</span><span class="dv">3</span>)] <span class="ot">&lt;-</span> code_list[[i]] <span class="co">#Adding T Codes to the table.</span></span>
<span id="cb4-65"><a href="#cb4-65" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(invalid_totals<span class="sc">$</span>total[i]<span class="sc">&lt;</span><span class="dv">10</span>){</span>
<span id="cb4-66"><a href="#cb4-66" aria-hidden="true" tabindex="-1"></a>        <span class="fu">cat</span>(<span class="fu">paste</span>(invalid_totals<span class="sc">$</span>total[i], <span class="st">"Invalid Values where"</span>, invalid_totals<span class="sc">$</span>Comment[i]), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>) <span class="co">#If there are mistakes, report number and TCodes for investigation.</span></span>
<span id="cb4-67"><a href="#cb4-67" aria-hidden="true" tabindex="-1"></a>        <span class="fu">cat</span>(<span class="st">"Invalid Codes:"</span>, invalid_totals<span class="sc">$</span>codes[i], <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>)</span>
<span id="cb4-68"><a href="#cb4-68" aria-hidden="true" tabindex="-1"></a>      } <span class="cf">else</span> {</span>
<span id="cb4-69"><a href="#cb4-69" aria-hidden="true" tabindex="-1"></a>        <span class="fu">cat</span>(<span class="fu">paste</span>(invalid_totals<span class="sc">$</span>total[i], <span class="st">"Invalid Values where"</span>, invalid_totals<span class="sc">$</span>Comment[i]), <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>)</span>
<span id="cb4-70"><a href="#cb4-70" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb4-71"><a href="#cb4-71" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb4-72"><a href="#cb4-72" aria-hidden="true" tabindex="-1"></a>    csv_output <span class="ot">&lt;-</span> invalid_totals <span class="sc">|&gt;</span></span>
<span id="cb4-73"><a href="#cb4-73" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(<span class="sc">-</span>codes)</span>
<span id="cb4-74"><a href="#cb4-74" aria-hidden="true" tabindex="-1"></a>    <span class="fu">write.csv</span>(csv_output, <span class="at">file =</span> <span class="st">"Error Codes.csv"</span>) <span class="co">#Writing .csv file for easy access by data managers.</span></span>
<span id="cb4-75"><a href="#cb4-75" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb4-76"><a href="#cb4-76" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"No Invalid Values"</span>)</span>
<span id="cb4-77"><a href="#cb4-77" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb4-78"><a href="#cb4-78" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-79"><a href="#cb4-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-80"><a href="#cb4-80" aria-hidden="true" tabindex="-1"></a>cross_check <span class="ot">&lt;-</span> <span class="cf">function</span>(Condition_1, Condition_2, Condition_3, Condition_4, Variable_Value, Comment, df1, ...){ <span class="co">#Raw cross check function for specific rules.</span></span>
<span id="cb4-81"><a href="#cb4-81" aria-hidden="true" tabindex="-1"></a>  Condition_1 <span class="ot">=</span> <span class="fu">ifelse</span>(<span class="sc">!</span><span class="fu">is.na</span>(Condition_1), Condition_1, <span class="st">'TRUE'</span>)</span>
<span id="cb4-82"><a href="#cb4-82" aria-hidden="true" tabindex="-1"></a>  Condition_2 <span class="ot">=</span> <span class="fu">ifelse</span>(<span class="sc">!</span><span class="fu">is.na</span>(Condition_2), Condition_2, <span class="st">'TRUE'</span>)</span>
<span id="cb4-83"><a href="#cb4-83" aria-hidden="true" tabindex="-1"></a>  Condition_3 <span class="ot">=</span> <span class="fu">ifelse</span>(<span class="sc">!</span><span class="fu">is.na</span>(Condition_3), Condition_3, <span class="st">'TRUE'</span>)</span>
<span id="cb4-84"><a href="#cb4-84" aria-hidden="true" tabindex="-1"></a>  Condition_4 <span class="ot">=</span> <span class="fu">ifelse</span>(<span class="sc">!</span><span class="fu">is.na</span>(Condition_4), Condition_4, <span class="st">'TRUE'</span>) <span class="co">#Currently only written up to 4 rules but can easily expand the scope.</span></span>
<span id="cb4-85"><a href="#cb4-85" aria-hidden="true" tabindex="-1"></a>  invalid_totals <span class="ot">&lt;-</span> df1 <span class="sc">|&gt;</span></span>
<span id="cb4-86"><a href="#cb4-86" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="fu">eval</span>(<span class="fu">parse_expr</span>(Condition_1))) <span class="sc">|&gt;</span></span>
<span id="cb4-87"><a href="#cb4-87" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="fu">eval</span>(<span class="fu">parse_expr</span>(Condition_2))) <span class="sc">|&gt;</span></span>
<span id="cb4-88"><a href="#cb4-88" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="fu">eval</span>(<span class="fu">parse_expr</span>(Condition_3))) <span class="sc">|&gt;</span></span>
<span id="cb4-89"><a href="#cb4-89" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="fu">eval</span>(<span class="fu">parse_expr</span>(Condition_4))) <span class="sc">|&gt;</span></span>
<span id="cb4-90"><a href="#cb4-90" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="fu">eval</span>(<span class="fu">parse_expr</span>(Variable_Value))) <span class="sc">|&gt;</span></span>
<span id="cb4-91"><a href="#cb4-91" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">total =</span> <span class="fu">n</span>(), <span class="at">invalid_codes =</span> <span class="fu">paste</span>(TCode, <span class="at">collapse =</span> <span class="st">", "</span>))</span>
<span id="cb4-92"><a href="#cb4-92" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">data.frame</span>(Comment, <span class="at">total =</span> invalid_totals<span class="sc">$</span>total, <span class="at">codes =</span> invalid_totals<span class="sc">$</span>invalid_codes))</span>
<span id="cb4-93"><a href="#cb4-93" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-94"><a href="#cb4-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-95"><a href="#cb4-95" aria-hidden="true" tabindex="-1"></a>get_dependencies <span class="ot">&lt;-</span> <span class="cf">function</span>(varname, <span class="at">dict=</span>datadict, <span class="at">df =</span> hpdata){ <span class="co">#Get variables that the variable 'depends' on. i.e. if they have a crosscheck rule relating to that variable.</span></span>
<span id="cb4-96"><a href="#cb4-96" aria-hidden="true" tabindex="-1"></a>  variable_list <span class="ot">&lt;-</span> <span class="fu">unique</span>(dict<span class="sc">$</span>FieldName[<span class="sc">!</span><span class="fu">is.na</span>(dict<span class="sc">$</span>FieldName) <span class="sc">&amp;</span> dict<span class="sc">$</span><span class="st">`</span><span class="at">Used by LLM?</span><span class="st">`</span><span class="sc">==</span><span class="st">"yes"</span>])</span>
<span id="cb4-97"><a href="#cb4-97" aria-hidden="true" tabindex="-1"></a>  first_row <span class="ot">&lt;-</span> <span class="fu">which</span>(dict<span class="sc">$</span>FieldName<span class="sc">==</span>varname)</span>
<span id="cb4-98"><a href="#cb4-98" aria-hidden="true" tabindex="-1"></a>  dict2 <span class="ot">&lt;-</span> dict[first_row<span class="sc">:</span><span class="fu">nrow</span>(dict),]</span>
<span id="cb4-99"><a href="#cb4-99" aria-hidden="true" tabindex="-1"></a>  last_row <span class="ot">&lt;-</span> <span class="fu">min</span>(<span class="fu">min</span>(<span class="fu">which</span>(<span class="sc">!</span><span class="fu">is.na</span>(dict2<span class="sc">$</span>FieldName))[<span class="sc">-</span><span class="dv">1</span>])<span class="sc">-</span><span class="dv">1</span>, <span class="fu">nrow</span>(dict2))</span>
<span id="cb4-100"><a href="#cb4-100" aria-hidden="true" tabindex="-1"></a>  dict_var <span class="ot">&lt;-</span> dict2[<span class="dv">1</span><span class="sc">:</span>last_row,] <span class="co">#Filtering Data dictionary to rows of interest.</span></span>
<span id="cb4-101"><a href="#cb4-101" aria-hidden="true" tabindex="-1"></a>  <span class="co"># dict_var &lt;- dict_var[!is.na(dict_var$Variable_Value),]</span></span>
<span id="cb4-102"><a href="#cb4-102" aria-hidden="true" tabindex="-1"></a>  deps <span class="ot">&lt;-</span> <span class="fu">colSums</span>(<span class="fu">sapply</span>(variable_list, <span class="cf">function</span>(pattern) {</span>
<span id="cb4-103"><a href="#cb4-103" aria-hidden="true" tabindex="-1"></a>    strings <span class="ot">&lt;-</span> <span class="fu">list_c</span>(<span class="fu">str_split</span>(<span class="fu">c</span>(dict_var<span class="sc">$</span>Variable_Value, dict_var<span class="sc">$</span>Condition_1, dict_var<span class="sc">$</span>Condition_2, dict_var<span class="sc">$</span>Condition_3, dict_var<span class="sc">$</span>Condition_4), <span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">.|</span><span class="sc">\\</span><span class="st">(|</span><span class="sc">\\</span><span class="st">)|</span><span class="sc">\\</span><span class="st">-|</span><span class="sc">\\</span><span class="st">&gt;|</span><span class="sc">\\</span><span class="st">&lt;|</span><span class="sc">\\</span><span class="st">=|</span><span class="sc">\\</span><span class="st">!"</span>)) <span class="co">#Search through rules for variable names.</span></span>
<span id="cb4-104"><a href="#cb4-104" aria-hidden="true" tabindex="-1"></a>    strings <span class="sc">==</span> pattern <span class="co">#Grab variable names that are present.</span></span>
<span id="cb4-105"><a href="#cb4-105" aria-hidden="true" tabindex="-1"></a>  }), <span class="at">na.rm =</span> T)<span class="sc">&gt;</span><span class="dv">0</span></span>
<span id="cb4-106"><a href="#cb4-106" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(deps)</span>
<span id="cb4-107"><a href="#cb4-107" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-108"><a href="#cb4-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-109"><a href="#cb4-109" aria-hidden="true" tabindex="-1"></a>freq_labelled_factor <span class="ot">&lt;-</span> <span class="cf">function</span>(varname, <span class="at">df =</span> hpdata, <span class="at">dict =</span> datadict){ <span class="co">#Output custom frequency table that utilizes code labels to make a table understandable without altering data structure.</span></span>
<span id="cb4-110"><a href="#cb4-110" aria-hidden="true" tabindex="-1"></a>  first_row <span class="ot">&lt;-</span> <span class="fu">which</span>(dict<span class="sc">$</span>FieldName<span class="sc">==</span>varname)</span>
<span id="cb4-111"><a href="#cb4-111" aria-hidden="true" tabindex="-1"></a>  dict2 <span class="ot">&lt;-</span> dict[first_row<span class="sc">:</span><span class="fu">nrow</span>(dict),]</span>
<span id="cb4-112"><a href="#cb4-112" aria-hidden="true" tabindex="-1"></a>  last_row <span class="ot">&lt;-</span> <span class="fu">min</span>(<span class="fu">min</span>(<span class="fu">which</span>(<span class="sc">!</span><span class="fu">is.na</span>(dict2<span class="sc">$</span>FieldName))[<span class="sc">-</span><span class="dv">1</span>])<span class="sc">-</span><span class="dv">1</span>, <span class="fu">nrow</span>(dict2))</span>
<span id="cb4-113"><a href="#cb4-113" aria-hidden="true" tabindex="-1"></a>  dict_var <span class="ot">&lt;-</span> dict2[<span class="dv">1</span><span class="sc">:</span>last_row,]</span>
<span id="cb4-114"><a href="#cb4-114" aria-hidden="true" tabindex="-1"></a>  dict_var <span class="ot">&lt;-</span> dict_var[<span class="sc">!</span><span class="fu">is.na</span>(dict_var<span class="sc">$</span>Code),]</span>
<span id="cb4-115"><a href="#cb4-115" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> <span class="fu">factor</span>(df[,<span class="fu">colnames</span>(df)<span class="sc">==</span>varname], <span class="at">levels =</span> dict_var<span class="sc">$</span>Code, <span class="at">labels =</span> dict_var<span class="sc">$</span>CodeLabel)</span>
<span id="cb4-116"><a href="#cb4-116" aria-hidden="true" tabindex="-1"></a>  <span class="fu">freq</span>(data, <span class="at">cumul =</span> F, <span class="at">order =</span> <span class="st">"freq"</span>)</span>
<span id="cb4-117"><a href="#cb4-117" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-118"><a href="#cb4-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-119"><a href="#cb4-119" aria-hidden="true" tabindex="-1"></a>ctable_labelled <span class="ot">&lt;-</span> <span class="cf">function</span>(varname1, varname2, <span class="at">df =</span> hpdata, <span class="at">dict =</span> datadict){ <span class="co">#Output cross check table that utilizes code labels to make it understandable.</span></span>
<span id="cb4-120"><a href="#cb4-120" aria-hidden="true" tabindex="-1"></a>  first_row <span class="ot">&lt;-</span> <span class="fu">which</span>(dict<span class="sc">$</span>FieldName<span class="sc">==</span>varname1)</span>
<span id="cb4-121"><a href="#cb4-121" aria-hidden="true" tabindex="-1"></a>  dict2 <span class="ot">&lt;-</span> dict[first_row<span class="sc">:</span><span class="fu">nrow</span>(dict),]</span>
<span id="cb4-122"><a href="#cb4-122" aria-hidden="true" tabindex="-1"></a>  last_row <span class="ot">&lt;-</span> <span class="fu">min</span>(<span class="fu">min</span>(<span class="fu">which</span>(<span class="sc">!</span><span class="fu">is.na</span>(dict2<span class="sc">$</span>FieldName))[<span class="sc">-</span><span class="dv">1</span>])<span class="sc">-</span><span class="dv">1</span>, <span class="fu">nrow</span>(dict2))</span>
<span id="cb4-123"><a href="#cb4-123" aria-hidden="true" tabindex="-1"></a>  dict_var <span class="ot">&lt;-</span> dict2[<span class="dv">1</span><span class="sc">:</span>last_row,]</span>
<span id="cb4-124"><a href="#cb4-124" aria-hidden="true" tabindex="-1"></a>  dict_var <span class="ot">&lt;-</span> dict_var[<span class="sc">!</span><span class="fu">is.na</span>(dict_var<span class="sc">$</span>Code),]</span>
<span id="cb4-125"><a href="#cb4-125" aria-hidden="true" tabindex="-1"></a>  data1 <span class="ot">&lt;-</span> <span class="fu">factor</span>(df[,<span class="fu">colnames</span>(df)<span class="sc">==</span>varname1], <span class="at">levels =</span> dict_var<span class="sc">$</span>Code, <span class="at">labels =</span> dict_var<span class="sc">$</span>CodeLabel)</span>
<span id="cb4-126"><a href="#cb4-126" aria-hidden="true" tabindex="-1"></a>  first_row <span class="ot">&lt;-</span> <span class="fu">which</span>(dict<span class="sc">$</span>FieldName<span class="sc">==</span>varname2)</span>
<span id="cb4-127"><a href="#cb4-127" aria-hidden="true" tabindex="-1"></a>  dict2 <span class="ot">&lt;-</span> dict[first_row<span class="sc">:</span><span class="fu">nrow</span>(dict),]</span>
<span id="cb4-128"><a href="#cb4-128" aria-hidden="true" tabindex="-1"></a>  last_row <span class="ot">&lt;-</span> <span class="fu">min</span>(<span class="fu">min</span>(<span class="fu">which</span>(<span class="sc">!</span><span class="fu">is.na</span>(dict2<span class="sc">$</span>FieldName))[<span class="sc">-</span><span class="dv">1</span>])<span class="sc">-</span><span class="dv">1</span>, <span class="fu">nrow</span>(dict2))</span>
<span id="cb4-129"><a href="#cb4-129" aria-hidden="true" tabindex="-1"></a>  dict_var <span class="ot">&lt;-</span> dict2[<span class="dv">1</span><span class="sc">:</span>last_row,]</span>
<span id="cb4-130"><a href="#cb4-130" aria-hidden="true" tabindex="-1"></a>  dict_var <span class="ot">&lt;-</span> dict_var[<span class="sc">!</span><span class="fu">is.na</span>(dict_var<span class="sc">$</span>Code),]</span>
<span id="cb4-131"><a href="#cb4-131" aria-hidden="true" tabindex="-1"></a>  data2 <span class="ot">&lt;-</span> <span class="fu">factor</span>(df[,<span class="fu">colnames</span>(df)<span class="sc">==</span>varname2], <span class="at">levels =</span> dict_var<span class="sc">$</span>Code, <span class="at">labels =</span> dict_var<span class="sc">$</span>CodeLabel)</span>
<span id="cb4-132"><a href="#cb4-132" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">length</span>(<span class="fu">levels</span>(data1))<span class="sc">&gt;</span><span class="fu">length</span>(<span class="fu">levels</span>(data2))){</span>
<span id="cb4-133"><a href="#cb4-133" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">ctable</span>(data1, data2, <span class="at">prop =</span> <span class="st">"t"</span>, <span class="at">dnn =</span> <span class="fu">c</span>(varname1, varname2)))</span>
<span id="cb4-134"><a href="#cb4-134" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb4-135"><a href="#cb4-135" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">ctable</span>(data2, data1, <span class="at">prop =</span> <span class="st">"t"</span>, <span class="at">dnn =</span> <span class="fu">c</span>(varname2, varname1)))</span>
<span id="cb4-136"><a href="#cb4-136" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb4-137"><a href="#cb4-137" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-138"><a href="#cb4-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-139"><a href="#cb4-139" aria-hidden="true" tabindex="-1"></a>summary_by_factor <span class="ot">&lt;-</span> <span class="cf">function</span>(factor_var, cont_var, <span class="at">df =</span> hpdata, <span class="at">dict =</span> datadict){ <span class="co">#Outputs summary of a continuous variable by its corresponding value in a factored variable.</span></span>
<span id="cb4-140"><a href="#cb4-140" aria-hidden="true" tabindex="-1"></a>  first_row <span class="ot">&lt;-</span> <span class="fu">which</span>(dict<span class="sc">$</span>FieldName<span class="sc">==</span>factor_var)</span>
<span id="cb4-141"><a href="#cb4-141" aria-hidden="true" tabindex="-1"></a>  dict2 <span class="ot">&lt;-</span> dict[first_row<span class="sc">:</span><span class="fu">nrow</span>(dict),]</span>
<span id="cb4-142"><a href="#cb4-142" aria-hidden="true" tabindex="-1"></a>  last_row <span class="ot">&lt;-</span> <span class="fu">min</span>(<span class="fu">min</span>(<span class="fu">which</span>(<span class="sc">!</span><span class="fu">is.na</span>(dict2<span class="sc">$</span>FieldName))[<span class="sc">-</span><span class="dv">1</span>])<span class="sc">-</span><span class="dv">1</span>, <span class="fu">nrow</span>(dict2))</span>
<span id="cb4-143"><a href="#cb4-143" aria-hidden="true" tabindex="-1"></a>  dict_var <span class="ot">&lt;-</span> dict2[<span class="dv">1</span><span class="sc">:</span>last_row,]</span>
<span id="cb4-144"><a href="#cb4-144" aria-hidden="true" tabindex="-1"></a>  dict_var <span class="ot">&lt;-</span> dict_var[<span class="sc">!</span><span class="fu">is.na</span>(dict_var<span class="sc">$</span>Code),]</span>
<span id="cb4-145"><a href="#cb4-145" aria-hidden="true" tabindex="-1"></a>  codes <span class="ot">&lt;-</span> <span class="fu">unique</span>(dict_var<span class="sc">$</span>Code)</span>
<span id="cb4-146"><a href="#cb4-146" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(code <span class="cf">in</span> codes){</span>
<span id="cb4-147"><a href="#cb4-147" aria-hidden="true" tabindex="-1"></a>    data <span class="ot">&lt;-</span> <span class="fu">subset</span>(df, <span class="fu">get</span>(factor_var)<span class="sc">==</span>code)</span>
<span id="cb4-148"><a href="#cb4-148" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(cont_var, <span class="st">"for"</span>, factor_var, <span class="st">"="</span>, dict_var<span class="sc">$</span>CodeLabel[dict_var<span class="sc">$</span>Code<span class="sc">==</span>code], <span class="st">":"</span>, <span class="at">collapse =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb4-149"><a href="#cb4-149" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">summary</span>(data[,<span class="fu">colnames</span>(data)<span class="sc">==</span>cont_var]), <span class="at">collapse =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb4-150"><a href="#cb4-150" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb4-151"><a href="#cb4-151" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb4-152"><a href="#cb4-152" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">sum</span>(<span class="fu">is.na</span>(df[,<span class="fu">colnames</span>(df)<span class="sc">==</span>factor_var]))<span class="sc">&gt;</span><span class="dv">0</span>){</span>
<span id="cb4-153"><a href="#cb4-153" aria-hidden="true" tabindex="-1"></a>    data <span class="ot">&lt;-</span> <span class="fu">subset</span>(df, <span class="fu">is.na</span>(<span class="fu">get</span>(factor_var)))</span>
<span id="cb4-154"><a href="#cb4-154" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(cont_var, <span class="st">"for"</span>, factor_var, <span class="st">"= NA:"</span>, <span class="at">collapse =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb4-155"><a href="#cb4-155" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">summary</span>(data[,<span class="fu">colnames</span>(data)<span class="sc">==</span>cont_var]), <span class="at">collapse =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb4-156"><a href="#cb4-156" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb4-157"><a href="#cb4-157" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb4-158"><a href="#cb4-158" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-159"><a href="#cb4-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-160"><a href="#cb4-160" aria-hidden="true" tabindex="-1"></a>crosstab <span class="ot">&lt;-</span> <span class="cf">function</span>(varname1, varname2, df, dict){ <span class="co">#Uses variable structure designations to output correct cross tabulations of two variables depending on whether they are numeric or factors.</span></span>
<span id="cb4-161"><a href="#cb4-161" aria-hidden="true" tabindex="-1"></a>  data_type1 <span class="ot">&lt;-</span> dict<span class="sc">$</span>Datatype[dict<span class="sc">$</span>FieldName<span class="sc">==</span>varname1]</span>
<span id="cb4-162"><a href="#cb4-162" aria-hidden="true" tabindex="-1"></a>  data_type1 <span class="ot">&lt;-</span> data_type1[<span class="sc">!</span><span class="fu">is.na</span>(data_type1)]</span>
<span id="cb4-163"><a href="#cb4-163" aria-hidden="true" tabindex="-1"></a>  data_type2 <span class="ot">&lt;-</span> dict<span class="sc">$</span>Datatype[dict<span class="sc">$</span>FieldName<span class="sc">==</span>varname2]</span>
<span id="cb4-164"><a href="#cb4-164" aria-hidden="true" tabindex="-1"></a>  data_type2 <span class="ot">&lt;-</span> data_type2[<span class="sc">!</span><span class="fu">is.na</span>(data_type2)]</span>
<span id="cb4-165"><a href="#cb4-165" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(data_type1 <span class="sc">!=</span> <span class="st">"int"</span> <span class="sc">&amp;</span> data_type2 <span class="sc">!=</span> <span class="st">"int"</span>){</span>
<span id="cb4-166"><a href="#cb4-166" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="fu">ctable_labelled</span>(varname1, varname2, <span class="at">df =</span> df, <span class="at">dict =</span> dict))</span>
<span id="cb4-167"><a href="#cb4-167" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span>(data_type1 <span class="sc">==</span> <span class="st">"int"</span> <span class="sc">&amp;</span> data_type2 <span class="sc">==</span> <span class="st">"int"</span>){</span>
<span id="cb4-168"><a href="#cb4-168" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plot</span>(df[,<span class="fu">colnames</span>(df)<span class="sc">==</span>varname1], df[,<span class="fu">colnames</span>(df)<span class="sc">==</span>varname2], <span class="at">xlab =</span> varname1, <span class="at">ylab =</span> varname2) </span>
<span id="cb4-169"><a href="#cb4-169" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span>(data_type1 <span class="sc">!=</span> <span class="st">"int"</span>){</span>
<span id="cb4-170"><a href="#cb4-170" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summary_by_factor</span>(<span class="at">factor_var =</span> varname1, <span class="at">cont_var =</span> varname2, <span class="at">df =</span> df, <span class="at">dict =</span> dict)</span>
<span id="cb4-171"><a href="#cb4-171" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span>{</span>
<span id="cb4-172"><a href="#cb4-172" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summary_by_factor</span>(<span class="at">factor_var =</span> varname2, <span class="at">cont_var =</span> varname1, <span class="at">df =</span> df, <span class="at">dict =</span> dict)</span>
<span id="cb4-173"><a href="#cb4-173" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb4-174"><a href="#cb4-174" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-175"><a href="#cb4-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-176"><a href="#cb4-176" aria-hidden="true" tabindex="-1"></a>crosscheck_output <span class="ot">&lt;-</span> <span class="cf">function</span>(varname, <span class="at">df =</span> hpdata, <span class="at">dict =</span> datadict){ <span class="co">#For a given variable, outputs all crosscheck errors as well as tables between cross checking variables.</span></span>
<span id="cb4-177"><a href="#cb4-177" aria-hidden="true" tabindex="-1"></a>  dependencies <span class="ot">&lt;-</span> <span class="fu">names</span>(<span class="fu">get_dependencies</span>(varname, <span class="at">df =</span> df, <span class="at">dict =</span> dict)[<span class="fu">get_dependencies</span>(varname, <span class="at">df =</span> df, <span class="at">dict =</span> dict)])</span>
<span id="cb4-178"><a href="#cb4-178" aria-hidden="true" tabindex="-1"></a>  dependencies <span class="ot">&lt;-</span> dependencies[dependencies<span class="sc">!=</span>varname]</span>
<span id="cb4-179"><a href="#cb4-179" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(dep <span class="cf">in</span> dependencies){</span>
<span id="cb4-180"><a href="#cb4-180" aria-hidden="true" tabindex="-1"></a>    <span class="fu">crosstab</span>(varname, dep, <span class="at">df =</span> df, <span class="at">dict  =</span> dict)</span>
<span id="cb4-181"><a href="#cb4-181" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb4-182"><a href="#cb4-182" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb4-183"><a href="#cb4-183" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_crosscheck_errors</span>(varname, <span class="at">df =</span> df, <span class="at">dict =</span> dict)</span>
<span id="cb4-184"><a href="#cb4-184" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="qc" class="level2">
<h2 class="anchored" data-anchor-id="qc">QC</h2>
<section id="section" class="level5">
<h5 class="anchored" data-anchor-id="section"></h5>
</section>
<section id="general-analysis" class="level4">
<h4 class="anchored" data-anchor-id="general-analysis">General Analysis</h4>
<section id="section-1" class="level5">
<h5 class="anchored" data-anchor-id="section-1"></h5>
</section>
<section id="data-structure" class="level5">
<h5 class="anchored" data-anchor-id="data-structure">Data Structure</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>variable_list <span class="ot">&lt;-</span> <span class="fu">unique</span>(datadict<span class="sc">$</span>FieldName[<span class="sc">!</span><span class="fu">is.na</span>(datadict<span class="sc">$</span>FieldName) <span class="sc">&amp;</span> datadict<span class="sc">$</span><span class="st">`</span><span class="at">Used by LLM?</span><span class="st">`</span><span class="sc">==</span><span class="st">"yes"</span>])</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>network_table <span class="ot">&lt;-</span> <span class="fu">sapply</span>(variable_list, get_dependencies)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>graph <span class="ot">&lt;-</span> <span class="fu">graph_from_adjacency_matrix</span>(network_table, <span class="at">mode =</span> <span class="st">"directed"</span>, <span class="at">diag =</span> <span class="cn">FALSE</span>) </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>graph <span class="ot">&lt;-</span> <span class="fu">delete.vertices</span>(graph, <span class="fu">which</span>(<span class="fu">degree</span>(graph)<span class="sc">==</span><span class="dv">0</span>))</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>layout <span class="ot">&lt;-</span> <span class="fu">layout_as_tree</span>(graph)<span class="sc">%*%</span><span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="sc">-</span><span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>), <span class="dv">2</span>)<span class="sc">%*%</span><span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="sc">-</span><span class="dv">1</span>), <span class="dv">2</span>)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="fu">plot.igraph</span>(graph, <span class="at">layout =</span> layout, <span class="at">edge.arrow.size=</span><span class="fl">0.4</span>, <span class="at">vertex.size =</span> <span class="dv">10</span>, <span class="at">vertex.label.cex =</span> <span class="fl">0.9</span>, <span class="at">vertex.shape =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Histopathology-QC_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="960"></p>
</div>
</div>
</section>
<section id="section-2" class="level5">
<h5 class="anchored" data-anchor-id="section-2"></h5>
</section>
<section id="missing-codes" class="level5">
<h5 class="anchored" data-anchor-id="missing-codes">Missing Codes</h5>
<p>This is quick generated list of missing codes in the Data Dictionary. This excludes TNM coding which is analysed separately. If reading for the purpose of recoding, check this table out, then go to the TNM section and all bases should be covered.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>factor_vars <span class="ot">&lt;-</span> datadict<span class="sc">$</span>FieldName[datadict<span class="sc">$</span>Datatype<span class="sc">%in%</span><span class="fu">c</span>(<span class="st">"varchar"</span>, <span class="st">"char"</span>) <span class="sc">&amp;</span> datadict<span class="sc">$</span><span class="st">`</span><span class="at">Used by LLM?</span><span class="st">`</span><span class="sc">==</span><span class="st">"yes"</span> <span class="sc">&amp;</span> datadict<span class="sc">$</span>DataLength<span class="sc">&lt;</span><span class="dv">6</span>] <span class="co">#Would like to change this arbitrary &lt;6 bit here</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>general_factor_analysis <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">variable_name =</span> factor_vars, <span class="at">missing_factors =</span> <span class="cn">NA</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>general_factor_analysis<span class="sc">$</span>missing_factors <span class="ot">&lt;-</span> <span class="fu">lapply</span>(general_factor_analysis<span class="sc">$</span>variable_name, get_missing_factors_raw)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>general_factor_analysis <span class="ot">&lt;-</span> general_factor_analysis <span class="sc">|&gt;</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">|&gt;</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">length</span>(missing_factors)<span class="sc">&gt;</span><span class="dv">0</span>)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="fu">gt</span>(general_factor_analysis)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div id="raxkknlnvg" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#raxkknlnvg table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#raxkknlnvg thead, #raxkknlnvg tbody, #raxkknlnvg tfoot, #raxkknlnvg tr, #raxkknlnvg td, #raxkknlnvg th {
  border-style: none;
}

#raxkknlnvg p {
  margin: 0;
  padding: 0;
}

#raxkknlnvg .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#raxkknlnvg .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#raxkknlnvg .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#raxkknlnvg .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#raxkknlnvg .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#raxkknlnvg .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#raxkknlnvg .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#raxkknlnvg .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#raxkknlnvg .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#raxkknlnvg .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#raxkknlnvg .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#raxkknlnvg .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#raxkknlnvg .gt_spanner_row {
  border-bottom-style: hidden;
}

#raxkknlnvg .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#raxkknlnvg .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#raxkknlnvg .gt_from_md > :first-child {
  margin-top: 0;
}

#raxkknlnvg .gt_from_md > :last-child {
  margin-bottom: 0;
}

#raxkknlnvg .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#raxkknlnvg .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#raxkknlnvg .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#raxkknlnvg .gt_row_group_first td {
  border-top-width: 2px;
}

#raxkknlnvg .gt_row_group_first th {
  border-top-width: 2px;
}

#raxkknlnvg .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#raxkknlnvg .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#raxkknlnvg .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#raxkknlnvg .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#raxkknlnvg .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#raxkknlnvg .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#raxkknlnvg .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#raxkknlnvg .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#raxkknlnvg .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#raxkknlnvg .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#raxkknlnvg .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#raxkknlnvg .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#raxkknlnvg .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#raxkknlnvg .gt_left {
  text-align: left;
}

#raxkknlnvg .gt_center {
  text-align: center;
}

#raxkknlnvg .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#raxkknlnvg .gt_font_normal {
  font-weight: normal;
}

#raxkknlnvg .gt_font_bold {
  font-weight: bold;
}

#raxkknlnvg .gt_font_italic {
  font-style: italic;
}

#raxkknlnvg .gt_super {
  font-size: 65%;
}

#raxkknlnvg .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#raxkknlnvg .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#raxkknlnvg .gt_indent_1 {
  text-indent: 5px;
}

#raxkknlnvg .gt_indent_2 {
  text-indent: 10px;
}

#raxkknlnvg .gt_indent_3 {
  text-indent: 15px;
}

#raxkknlnvg .gt_indent_4 {
  text-indent: 20px;
}

#raxkknlnvg .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="variable_name">variable_name</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="missing_factors">missing_factors</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="variable_name" class="gt_row gt_left">Side</td>
<td headers="missing_factors" class="gt_row gt_center">l</td></tr>
    <tr><td headers="variable_name" class="gt_row gt_left">Solid_DCISGP</td>
<td headers="missing_factors" class="gt_row gt_center">Y</td></tr>
    <tr><td headers="variable_name" class="gt_row gt_left">Cribiform_DCISGP</td>
<td headers="missing_factors" class="gt_row gt_center">Y</td></tr>
    <tr><td headers="variable_name" class="gt_row gt_left">Micropapillary_DCISGP</td>
<td headers="missing_factors" class="gt_row gt_center">Y</td></tr>
    <tr><td headers="variable_name" class="gt_row gt_left">Papillary_DCISGP</td>
<td headers="missing_factors" class="gt_row gt_center">Y</td></tr>
    <tr><td headers="variable_name" class="gt_row gt_left">Apocrine_DCISGP</td>
<td headers="missing_factors" class="gt_row gt_center">Y</td></tr>
    <tr><td headers="variable_name" class="gt_row gt_left">Flat_DCISGP</td>
<td headers="missing_factors" class="gt_row gt_center">Y</td></tr>
    <tr><td headers="variable_name" class="gt_row gt_left">Comedo_DCISGP</td>
<td headers="missing_factors" class="gt_row gt_center">Y</td></tr>
    <tr><td headers="variable_name" class="gt_row gt_left">Clinging_DCISGP</td>
<td headers="missing_factors" class="gt_row gt_center">Y</td></tr>
    <tr><td headers="variable_name" class="gt_row gt_left">InvasiveGrade</td>
<td headers="missing_factors" class="gt_row gt_center">1</td></tr>
    <tr><td headers="variable_name" class="gt_row gt_left">AxillaryNodesPresent</td>
<td headers="missing_factors" class="gt_row gt_center">y</td></tr>
    <tr><td headers="variable_name" class="gt_row gt_left">PR_Status</td>
<td headers="missing_factors" class="gt_row gt_center">p</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>Just a few issues here coming from TRUE/FALSE coding in the data dictionary to Y/N coding in the data. Also a few upper/lower case issues which should be easily solved.</p>
</section>
<section id="section-3" class="level5">
<h5 class="anchored" data-anchor-id="section-3"></h5>
</section>
<section id="crosscheck-errors" class="level5">
<h5 class="anchored" data-anchor-id="crosscheck-errors">Crosscheck Errors</h5>
<p>Running code to check for crosscheck errors in the code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">total_crosscheck_errors</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>7 Invalid Values where No DCIS but DCIS Grade not NA 
Invalid Codes: T279H845, T286I590, T313I974, T331G164, T352E642, T430H109, T473G692 

2 Invalid Values where DCIS NA but DCIS Grade not NA 
Invalid Codes: T336F827, T415J855 

4 Invalid Values where No Insitu Carcinoma Present, but LCIS Present 
Invalid Codes: T420G212, T435E514, T460F219, T490J879 

1 Invalid Values where Insitu Carcinoma Present NA, but LCIS Present 
Invalid Codes: T363G340 

7 Invalid Values where LCIS NA but Pleomorphic LCIS not NA 
Invalid Codes: T263H173, T273J199, T289H877, T319E954, T357C168, T392D113, T440G132 

4 Invalid Values where Invasive Tumour Larger than Whole Tumour 
Invalid Codes: T331J679, T354C704, T354C784, T404E090 

1 Invalid Values where Invasive Tumour NA but Type is not NA 
Invalid Codes: T440G516 

468 Invalid Values where Type not 'No Special Type' but Type Component not NA 

1 Invalid Values where Invasive Tumour NA but Grade is not NA 
Invalid Codes: T440G516 

1 Invalid Values where Invasive Tumour NA but Tubules is not NA 
Invalid Codes: T440G516 

1 Invalid Values where Invasive Tumour NA but Pleomorphism is not NA 
Invalid Codes: T440G516 

1 Invalid Values where Invasive Tumour NA but Mitotic Activity is not NA 
Invalid Codes: T440G516 

1 Invalid Values where Axillary Nodes NA but Total Nodes not NA 
Invalid Codes: T389C520 

1 Invalid Values where Axillary Nodes NA but Positive Nodes not NA 
Invalid Codes: T389C520 

1 Invalid Values where Other Nodes Not Present but Total Nodes not NA 
Invalid Codes: T384J807 

1 Invalid Values where Other Nodes Not Present but Positive Nodes not NA 
Invalid Codes: T384J807 

1 Invalid Values where More Positive Nodes than Total Nodes 
Invalid Codes: T308I750 </code></pre>
</div>
</div>
</section>
<section id="section-4" class="level5">
<h5 class="anchored" data-anchor-id="section-4"></h5>
</section>
</section>
<section id="variable-check" class="level4">
<h4 class="anchored" data-anchor-id="variable-check">Variable Check</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>dict_variables <span class="ot">&lt;-</span> datadict<span class="sc">$</span>FieldName</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>dict_variables <span class="ot">&lt;-</span> dict_variables[<span class="sc">!</span><span class="fu">is.na</span>(dict_variables)]</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>data_variables <span class="ot">&lt;-</span> <span class="fu">colnames</span>(hpdata)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>missing_variables <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(data_variables, dict_variables)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Missing Variables in Data Dictionary:"</span>, <span class="fu">paste</span>(missing_variables, <span class="at">collapse =</span> <span class="st">", "</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Missing Variables in Data Dictionary: TCode</code></pre>
</div>
</div>
<p>Just some misspellings of the variables in the dictionary vs the data. Again just upper/lower case issues.</p>
<section id="section-5" class="level5">
<h5 class="anchored" data-anchor-id="section-5"></h5>
</section>
</section>
<section id="specimen" class="level4">
<h4 class="anchored" data-anchor-id="specimen">Specimen</h4>
<section id="section-6" class="level5">
<h5 class="anchored" data-anchor-id="section-6"></h5>
</section>
<section id="side" class="level5">
<h5 class="anchored" data-anchor-id="side">Side</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"Side"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                Freq   % Valid   % Total
------------- ------ --------- ---------
         Left   1446    50.648    50.630
        Right   1408    49.317    49.300
      Unknown      1     0.035     0.035
         &lt;NA&gt;      1               0.035
        Total   2856   100.000   100.000</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"Side"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1 Missing Codes
Missing Codes: l</code></pre>
</div>
</div>
<p>Need to recode lower-cases maybe? l to L, r to R etc.</p>
</section>
<section id="section-7" class="level5">
<h5 class="anchored" data-anchor-id="section-7"></h5>
</section>
<section id="tumourcount" class="level5">
<h5 class="anchored" data-anchor-id="tumourcount">TumourCount</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq</span>(hpdata<span class="sc">$</span>TumourCount, <span class="at">cumul =</span>F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  
hpdata$TumourCount  
Label: Tumour identifier coded sequencialy from 1 to max number of tumors per patholgoy report. Dataset has one raw per tumor, e.g. a patient with two tumors will have two raws with TumorCount= 1 and TumorCount = 2.  
Type: Integer  

              Freq   % Valid   % Total
----------- ------ --------- ---------
          1   2839     99.40     99.40
          2     17      0.60      0.60
       &lt;NA&gt;      0                0.00
      Total   2856    100.00    100.00</code></pre>
</div>
</div>
</section>
<section id="section-8" class="level5">
<h5 class="anchored" data-anchor-id="section-8"></h5>
</section>
<section id="screendetected" class="level5">
<h5 class="anchored" data-anchor-id="screendetected">ScreenDetected</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"ScreenDetected"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                             Freq   % Valid   % Total
-------------------------- ------ --------- ---------
           Screen Detected    380     88.58     13.31
       Not Screen Detected     32      7.46      1.12
      Reported - Not Known     17      3.96      0.60
                      &lt;NA&gt;   2427               84.98
                     Total   2856    100.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"ScreenDetected"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>No Missing Codes</code></pre>
</div>
</div>
</section>
<section id="section-9" class="level5">
<h5 class="anchored" data-anchor-id="section-9"></h5>
</section>
<section id="specimentype" class="level5">
<h5 class="anchored" data-anchor-id="specimentype">SpecimenType</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"SpecimenType"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                                Freq   % Valid   % Total
----------------------------- ------ --------- ---------
          Wide Local Excision   1625    56.898    56.898
                   Mastectomy    739    25.875    25.875
      Wide Bore Needle Biopsy    347    12.150    12.150
                 Local Biopsy     72     2.521     2.521
           Segmental Excision     31     1.085     1.085
                  Open Biopsy     23     0.805     0.805
             Node Biopsy Only     10     0.350     0.350
       Theraputic Mammoplasty      6     0.210     0.210
       Fine Needle Aspiration      2     0.070     0.070
                  Re Excision      1     0.035     0.035
                         &lt;NA&gt;      0               0.000
                        Total   2856   100.000   100.000</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"SpecimenType"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>No Missing Codes</code></pre>
</div>
</div>
</section>
<section id="section-10" class="level5">
<h5 class="anchored" data-anchor-id="section-10"></h5>
</section>
<section id="specimenweight" class="level5">
<h5 class="anchored" data-anchor-id="specimenweight">SpecimenWeight</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(hpdata<span class="sc">$</span>SpecimenWeight)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
   1.31   26.00   51.00  208.80  207.00 4218.00     783 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(hpdata<span class="sc">$</span>SpecimenWeight, <span class="at">main =</span> <span class="st">"Specimen Weight"</span>, <span class="at">xlab =</span> <span class="st">"Weight (g)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Histopathology-QC_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary_by_factor</span>(<span class="st">"SpecimenType"</span>, <span class="st">"SpecimenWeight"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>SpecimenWeight for SpecimenType = Wide Bore Needle Biopsy : 
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
   8.00   11.35   16.20  134.57   61.25  681.00     341 

SpecimenWeight for SpecimenType = Wide Local Excision : 
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
   1.31   22.00   36.00   53.01   62.23 1849.00     183 

SpecimenWeight for SpecimenType = Mastectomy : 
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
   13.0   360.0   564.0   672.9   900.0  4218.0     222 

SpecimenWeight for SpecimenType = Node Biopsy Only : 
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
     NA      NA      NA     NaN      NA      NA      10 

SpecimenWeight for SpecimenType = Open Biopsy : 
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
   2.00   10.60   17.00   24.31   33.00   68.80       6 

SpecimenWeight for SpecimenType = Re Excision : 
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
     NA      NA      NA     NaN      NA      NA       1 

SpecimenWeight for SpecimenType = Segmental Excision : 
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
   17.0    34.7    56.0   127.5   165.0   605.0       6 

SpecimenWeight for SpecimenType = Theraputic Mammoplasty : 
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   64.0    94.3   129.7   181.9   224.7   429.0 

SpecimenWeight for SpecimenType = Fine Needle Aspiration : 
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
     NA      NA      NA     NaN      NA      NA       2 

SpecimenWeight for SpecimenType = Local Biopsy : 
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
   2.00   12.88   27.50   50.08   58.80  700.00      12 </code></pre>
</div>
</div>
</section>
<section id="section-11" class="level5">
<h5 class="anchored" data-anchor-id="section-11"></h5>
</section>
<section id="axillaryprocedure" class="level5">
<h5 class="anchored" data-anchor-id="axillaryprocedure">AxillaryProcedure</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"AxillaryProcedure"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                                Freq   % Valid   % Total
----------------------------- ------ --------- ---------
         Sentinel Node Biopsy   1035     47.15     36.24
         Axillary Node Sample    623     28.38     21.81
      Axillary Node Clearance    323     14.72     11.31
      No Lymph Node Procedure    184      8.38      6.44
              OSNA Assessment     30      1.37      1.05
                         &lt;NA&gt;    661               23.14
                        Total   2856    100.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"AxillaryProcedure"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>No Missing Codes</code></pre>
</div>
</div>
</section>
<section id="section-12" class="level5">
<h5 class="anchored" data-anchor-id="section-12"></h5>
</section>
<section id="postneoadjuvantchemo" class="level5">
<h5 class="anchored" data-anchor-id="postneoadjuvantchemo">PostNeoadjuvantChemo</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"PostNeoadjuvantChemo"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                                   Freq   % Valid   % Total
-------------------------------- ------ --------- ---------
                    Chemotherapy    140     96.55      4.90
               Endocrine therapy      3      2.07      0.11
           Possible Chemotherapy      2      1.38      0.07
      Possible Endocrine therapy      0      0.00      0.00
                            &lt;NA&gt;   2711               94.92
                           Total   2856    100.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"PostNeoadjuvantChemo"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>No Missing Codes</code></pre>
</div>
</div>
</section>
<section id="section-13" class="level5">
<h5 class="anchored" data-anchor-id="section-13"></h5>
</section>
</section>
<section id="in-situ-lesion" class="level4">
<h4 class="anchored" data-anchor-id="in-situ-lesion">In Situ Lesion</h4>
<section id="section-14" class="level5">
<h5 class="anchored" data-anchor-id="section-14"></h5>
</section>
<section id="insitucarcinoma" class="level5">
<h5 class="anchored" data-anchor-id="insitucarcinoma">InsituCarcinoma</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"InsituCarcinoma"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                    Freq   % Valid   % Total
----------------- ------ --------- ---------
          Present   2121     81.02     74.26
      Not Present    497     18.98     17.40
             &lt;NA&gt;    238                8.33
            Total   2856    100.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"InsituCarcinoma"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>No Missing Codes</code></pre>
</div>
</div>
</section>
<section id="section-15" class="level5">
<h5 class="anchored" data-anchor-id="section-15"></h5>
</section>
<section id="ductalcarcinomainsitu" class="level5">
<h5 class="anchored" data-anchor-id="ductalcarcinomainsitu">DuctalCarcinomaInSitu</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"DuctalCarcinomaInsitu"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                    Freq   % Valid   % Total
----------------- ------ --------- ---------
          Present   1915     76.88     67.05
      Not Present    576     23.12     20.17
             &lt;NA&gt;    365               12.78
            Total   2856    100.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">crosscheck_output</span>(<span class="st">"DuctalCarcinomaInsitu"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Cross-Tabulation, Total Proportions  
InsituCarcinoma * DuctalCarcinomaInsitu  

----------------- ----------------------- -------------- ------------- ------------- ---------------
                    DuctalCarcinomaInsitu        Present   Not Present          &lt;NA&gt;           Total
  InsituCarcinoma                                                                                   
          Present                           1915 (67.1%)   194 ( 6.8%)    12 ( 0.4%)   2121 ( 74.3%)
      Not Present                              0 ( 0.0%)   382 (13.4%)   115 ( 4.0%)    497 ( 17.4%)
             &lt;NA&gt;                              0 ( 0.0%)     0 ( 0.0%)   238 ( 8.3%)    238 (  8.3%)
            Total                           1915 (67.1%)   576 (20.2%)   365 (12.8%)   2856 (100.0%)
----------------- ----------------------- -------------- ------------- ------------- ---------------

No Invalid Values</code></pre>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"DuctalCarcinomaInsitu"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>No Missing Codes</code></pre>
</div>
</div>
</section>
<section id="section-16" class="level5">
<h5 class="anchored" data-anchor-id="section-16"></h5>
</section>
<section id="dcisgrade" class="level5">
<h5 class="anchored" data-anchor-id="dcisgrade">DCISGrade</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"DCISGrade"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                          Freq   % Valid   % Total
----------------------- ------ --------- ---------
                   High    962     51.28     33.68
           Intermediate    537     28.62     18.80
                    Low    184      9.81      6.44
      High/Intermediate    120      6.40      4.20
       Intermediate/Low     71      3.78      2.49
         Not Assessable      2      0.11      0.07
                   &lt;NA&gt;    980               34.31
                  Total   2856    100.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">crosscheck_output</span>(<span class="st">"DCISGrade"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Cross-Tabulation, Total Proportions  
DCISGrade * DuctalCarcinomaInsitu  

------------------- ----------------------- --------------- -------------- -------------- ----------------
                      DuctalCarcinomaInsitu         Present    Not Present           &lt;NA&gt;            Total
          DCISGrade                                                                                       
                Low                            183 ( 6.41%)     1 ( 0.04%)     0 ( 0.00%)    184 (  6.44%)
     Not Assessable                              2 ( 0.07%)     0 ( 0.00%)     0 ( 0.00%)      2 (  0.07%)
               High                            956 (33.47%)     4 ( 0.14%)     2 ( 0.07%)    962 ( 33.68%)
  High/Intermediate                            120 ( 4.20%)     0 ( 0.00%)     0 ( 0.00%)    120 (  4.20%)
       Intermediate                            536 (18.77%)     1 ( 0.04%)     0 ( 0.00%)    537 ( 18.80%)
   Intermediate/Low                             70 ( 2.45%)     1 ( 0.04%)     0 ( 0.00%)     71 (  2.49%)
               &lt;NA&gt;                             48 ( 1.68%)   569 (19.92%)   363 (12.71%)    980 ( 34.31%)
              Total                           1915 (67.05%)   576 (20.17%)   365 (12.78%)   2856 (100.00%)
------------------- ----------------------- --------------- -------------- -------------- ----------------

7 Invalid Values where No DCIS but DCIS Grade not NA 
Invalid Codes: T279H845, T286I590, T313I974, T331G164, T352E642, T430H109, T473G692 

2 Invalid Values where DCIS NA but DCIS Grade not NA 
Invalid Codes: T336F827, T415J855 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"DCISGrade"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>No Missing Codes</code></pre>
</div>
</div>
</section>
<section id="section-17" class="level5">
<h5 class="anchored" data-anchor-id="section-17"></h5>
</section>
<section id="solid_dcisgp" class="level5">
<h5 class="anchored" data-anchor-id="solid_dcisgp">Solid_DCISGP</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"Solid_DCISGP"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                                Freq   % Valid   % Total
----------------------------- ------ --------- ---------
                      Present      0                0.00
      Not mentioned in report      0                0.00
                         &lt;NA&gt;   2856              100.00
                        Total   2856      0.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">crosscheck_output</span>(<span class="st">"Solid_DCISGP"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Cross-Tabulation, Total Proportions  
DuctalCarcinomaInsitu * Solid_DCISGP  

----------------------- -------------- ---------- ------------------------- --------------- ---------------
                          Solid_DCISGP    Present   Not mentioned in report            &lt;NA&gt;           Total
  DuctalCarcinomaInsitu                                                                                    
                Present                  0 (0.0%)                  0 (0.0%)   1915 ( 67.1%)   1915 ( 67.1%)
            Not Present                  0 (0.0%)                  0 (0.0%)    576 ( 20.2%)    576 ( 20.2%)
                   &lt;NA&gt;                  0 (0.0%)                  0 (0.0%)    365 ( 12.8%)    365 ( 12.8%)
                  Total                  0 (0.0%)                  0 (0.0%)   2856 (100.0%)   2856 (100.0%)
----------------------- -------------- ---------- ------------------------- --------------- ---------------

No Invalid Values</code></pre>
</div>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"Solid_DCISGP"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1 Missing Codes
Missing Codes: Y</code></pre>
</div>
</div>
<p>Seems like Data Dict needs updating coding system.</p>
</section>
<section id="section-18" class="level5">
<h5 class="anchored" data-anchor-id="section-18"></h5>
</section>
<section id="cribiform_dcisgp" class="level5">
<h5 class="anchored" data-anchor-id="cribiform_dcisgp">Cribiform_DCISGP</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"Cribiform_DCISGP"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                                Freq   % Valid   % Total
----------------------------- ------ --------- ---------
                      Present      0                0.00
      Not mentioned in report      0                0.00
                         &lt;NA&gt;   2856              100.00
                        Total   2856      0.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">crosscheck_output</span>(<span class="st">"Cribiform_DCISGP"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Cross-Tabulation, Total Proportions  
DuctalCarcinomaInsitu * Cribiform_DCISGP  

----------------------- ------------------ ---------- ------------------------- --------------- ---------------
                          Cribiform_DCISGP    Present   Not mentioned in report            &lt;NA&gt;           Total
  DuctalCarcinomaInsitu                                                                                        
                Present                      0 (0.0%)                  0 (0.0%)   1915 ( 67.1%)   1915 ( 67.1%)
            Not Present                      0 (0.0%)                  0 (0.0%)    576 ( 20.2%)    576 ( 20.2%)
                   &lt;NA&gt;                      0 (0.0%)                  0 (0.0%)    365 ( 12.8%)    365 ( 12.8%)
                  Total                      0 (0.0%)                  0 (0.0%)   2856 (100.0%)   2856 (100.0%)
----------------------- ------------------ ---------- ------------------------- --------------- ---------------

No Invalid Values</code></pre>
</div>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"Cribiform_DCISGP"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1 Missing Codes
Missing Codes: Y</code></pre>
</div>
</div>
<p>See above.</p>
</section>
<section id="section-19" class="level5">
<h5 class="anchored" data-anchor-id="section-19"></h5>
</section>
<section id="micropapillary_dcisgp" class="level5">
<h5 class="anchored" data-anchor-id="micropapillary_dcisgp">Micropapillary_DCISGP</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"Micropapillary_DCISGP"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                                Freq   % Valid   % Total
----------------------------- ------ --------- ---------
                      Present      0                0.00
      Not mentioned in report      0                0.00
                         &lt;NA&gt;   2856              100.00
                        Total   2856      0.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">crosscheck_output</span>(<span class="st">"Micropapillary_DCISGP"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Cross-Tabulation, Total Proportions  
DuctalCarcinomaInsitu * Micropapillary_DCISGP  

----------------------- ----------------------- ---------- ------------------------- --------------- ---------------
                          Micropapillary_DCISGP    Present   Not mentioned in report            &lt;NA&gt;           Total
  DuctalCarcinomaInsitu                                                                                             
                Present                           0 (0.0%)                  0 (0.0%)   1915 ( 67.1%)   1915 ( 67.1%)
            Not Present                           0 (0.0%)                  0 (0.0%)    576 ( 20.2%)    576 ( 20.2%)
                   &lt;NA&gt;                           0 (0.0%)                  0 (0.0%)    365 ( 12.8%)    365 ( 12.8%)
                  Total                           0 (0.0%)                  0 (0.0%)   2856 (100.0%)   2856 (100.0%)
----------------------- ----------------------- ---------- ------------------------- --------------- ---------------

No Invalid Values</code></pre>
</div>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"Micropapillary_DCISGP"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1 Missing Codes
Missing Codes: Y</code></pre>
</div>
</div>
</section>
<section id="section-20" class="level5">
<h5 class="anchored" data-anchor-id="section-20"></h5>
</section>
<section id="papillary_dcisgp" class="level5">
<h5 class="anchored" data-anchor-id="papillary_dcisgp">Papillary_DCISGP</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"Papillary_DCISGP"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                                Freq   % Valid   % Total
----------------------------- ------ --------- ---------
                      Present      0                0.00
      Not mentioned in report      0                0.00
                         &lt;NA&gt;   2856              100.00
                        Total   2856      0.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">crosscheck_output</span>(<span class="st">"Papillary_DCISGP"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Cross-Tabulation, Total Proportions  
DuctalCarcinomaInsitu * Papillary_DCISGP  

----------------------- ------------------ ---------- ------------------------- --------------- ---------------
                          Papillary_DCISGP    Present   Not mentioned in report            &lt;NA&gt;           Total
  DuctalCarcinomaInsitu                                                                                        
                Present                      0 (0.0%)                  0 (0.0%)   1915 ( 67.1%)   1915 ( 67.1%)
            Not Present                      0 (0.0%)                  0 (0.0%)    576 ( 20.2%)    576 ( 20.2%)
                   &lt;NA&gt;                      0 (0.0%)                  0 (0.0%)    365 ( 12.8%)    365 ( 12.8%)
                  Total                      0 (0.0%)                  0 (0.0%)   2856 (100.0%)   2856 (100.0%)
----------------------- ------------------ ---------- ------------------------- --------------- ---------------

No Invalid Values</code></pre>
</div>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"Papillary_DCISGP"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1 Missing Codes
Missing Codes: Y</code></pre>
</div>
</div>
</section>
<section id="section-21" class="level5">
<h5 class="anchored" data-anchor-id="section-21"></h5>
</section>
<section id="apocrine_dcisgp" class="level5">
<h5 class="anchored" data-anchor-id="apocrine_dcisgp">Apocrine_DCISGP</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"Apocrine_DCISGP"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                                Freq   % Valid   % Total
----------------------------- ------ --------- ---------
                      Present      0                0.00
      Not mentioned in report      0                0.00
                         &lt;NA&gt;   2856              100.00
                        Total   2856      0.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">crosscheck_output</span>(<span class="st">"Apocrine_DCISGP"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Cross-Tabulation, Total Proportions  
DuctalCarcinomaInsitu * Apocrine_DCISGP  

----------------------- ----------------- ---------- ------------------------- --------------- ---------------
                          Apocrine_DCISGP    Present   Not mentioned in report            &lt;NA&gt;           Total
  DuctalCarcinomaInsitu                                                                                       
                Present                     0 (0.0%)                  0 (0.0%)   1915 ( 67.1%)   1915 ( 67.1%)
            Not Present                     0 (0.0%)                  0 (0.0%)    576 ( 20.2%)    576 ( 20.2%)
                   &lt;NA&gt;                     0 (0.0%)                  0 (0.0%)    365 ( 12.8%)    365 ( 12.8%)
                  Total                     0 (0.0%)                  0 (0.0%)   2856 (100.0%)   2856 (100.0%)
----------------------- ----------------- ---------- ------------------------- --------------- ---------------

No Invalid Values</code></pre>
</div>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"Apocrine_DCISGP"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1 Missing Codes
Missing Codes: Y</code></pre>
</div>
</div>
</section>
<section id="section-22" class="level5">
<h5 class="anchored" data-anchor-id="section-22"></h5>
</section>
<section id="flat_dcisgp" class="level5">
<h5 class="anchored" data-anchor-id="flat_dcisgp">Flat_DCISGP</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"Flat_DCISGP"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                                Freq   % Valid   % Total
----------------------------- ------ --------- ---------
                      Present      0                0.00
      Not mentioned in report      0                0.00
                         &lt;NA&gt;   2856              100.00
                        Total   2856      0.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">crosscheck_output</span>(<span class="st">"Flat_DCISGP"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Cross-Tabulation, Total Proportions  
DuctalCarcinomaInsitu * Flat_DCISGP  

----------------------- ------------- ---------- ------------------------- --------------- ---------------
                          Flat_DCISGP    Present   Not mentioned in report            &lt;NA&gt;           Total
  DuctalCarcinomaInsitu                                                                                   
                Present                 0 (0.0%)                  0 (0.0%)   1915 ( 67.1%)   1915 ( 67.1%)
            Not Present                 0 (0.0%)                  0 (0.0%)    576 ( 20.2%)    576 ( 20.2%)
                   &lt;NA&gt;                 0 (0.0%)                  0 (0.0%)    365 ( 12.8%)    365 ( 12.8%)
                  Total                 0 (0.0%)                  0 (0.0%)   2856 (100.0%)   2856 (100.0%)
----------------------- ------------- ---------- ------------------------- --------------- ---------------

No Invalid Values</code></pre>
</div>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"Flat_DCISGP"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1 Missing Codes
Missing Codes: Y</code></pre>
</div>
</div>
</section>
<section id="section-23" class="level5">
<h5 class="anchored" data-anchor-id="section-23"></h5>
</section>
<section id="comedo_dcisgp" class="level5">
<h5 class="anchored" data-anchor-id="comedo_dcisgp">Comedo_DCISGP</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"Comedo_DCISGP"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                                Freq   % Valid   % Total
----------------------------- ------ --------- ---------
                      Present      0                0.00
      Not mentioned in report      0                0.00
                         &lt;NA&gt;   2856              100.00
                        Total   2856      0.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">crosscheck_output</span>(<span class="st">"Comedo_DCISGP"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Cross-Tabulation, Total Proportions  
DuctalCarcinomaInsitu * Comedo_DCISGP  

----------------------- --------------- ---------- ------------------------- --------------- ---------------
                          Comedo_DCISGP    Present   Not mentioned in report            &lt;NA&gt;           Total
  DuctalCarcinomaInsitu                                                                                     
                Present                   0 (0.0%)                  0 (0.0%)   1915 ( 67.1%)   1915 ( 67.1%)
            Not Present                   0 (0.0%)                  0 (0.0%)    576 ( 20.2%)    576 ( 20.2%)
                   &lt;NA&gt;                   0 (0.0%)                  0 (0.0%)    365 ( 12.8%)    365 ( 12.8%)
                  Total                   0 (0.0%)                  0 (0.0%)   2856 (100.0%)   2856 (100.0%)
----------------------- --------------- ---------- ------------------------- --------------- ---------------

No Invalid Values</code></pre>
</div>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"Comedo_DCISGP"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1 Missing Codes
Missing Codes: Y</code></pre>
</div>
</div>
</section>
<section id="section-24" class="level5">
<h5 class="anchored" data-anchor-id="section-24"></h5>
</section>
<section id="clinging" class="level5">
<h5 class="anchored" data-anchor-id="clinging">Clinging</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"Clinging_DCISGP"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                                Freq   % Valid   % Total
----------------------------- ------ --------- ---------
                      Present      0                0.00
      Not mentioned in report      0                0.00
                         &lt;NA&gt;   2856              100.00
                        Total   2856      0.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">crosscheck_output</span>(<span class="st">"Clinging_DCISGP"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Cross-Tabulation, Total Proportions  
DuctalCarcinomaInsitu * Clinging_DCISGP  

----------------------- ----------------- ---------- ------------------------- --------------- ---------------
                          Clinging_DCISGP    Present   Not mentioned in report            &lt;NA&gt;           Total
  DuctalCarcinomaInsitu                                                                                       
                Present                     0 (0.0%)                  0 (0.0%)   1915 ( 67.1%)   1915 ( 67.1%)
            Not Present                     0 (0.0%)                  0 (0.0%)    576 ( 20.2%)    576 ( 20.2%)
                   &lt;NA&gt;                     0 (0.0%)                  0 (0.0%)    365 ( 12.8%)    365 ( 12.8%)
                  Total                     0 (0.0%)                  0 (0.0%)   2856 (100.0%)   2856 (100.0%)
----------------------- ----------------- ---------- ------------------------- --------------- ---------------

No Invalid Values</code></pre>
</div>
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"Clinging_DCISGP"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1 Missing Codes
Missing Codes: Y</code></pre>
</div>
</div>
</section>
<section id="section-25" class="level5">
<h5 class="anchored" data-anchor-id="section-25"></h5>
</section>
<section id="comedonecrosis" class="level5">
<h5 class="anchored" data-anchor-id="comedonecrosis">ComedoNecrosis</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"ComedoNecrosis"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                                   Freq   % Valid   % Total
-------------------------------- ------ --------- ---------
      Yes - extent not specified    453     64.62     15.86
                     Not present    202     28.82      7.07
                        Moderate     23      3.28      0.81
                            Mild     18      2.57      0.63
          Marked (&gt;50% of ducts)      5      0.71      0.18
                            &lt;NA&gt;   2155               75.46
                           Total   2856    100.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">crosscheck_output</span>(<span class="st">"ComedoNecrosis"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Cross-Tabulation, Total Proportions  
ComedoNecrosis * DuctalCarcinomaInsitu  

---------------------------- ----------------------- -------------- ------------- -------------- ---------------
                               DuctalCarcinomaInsitu        Present   Not Present           &lt;NA&gt;           Total
              ComedoNecrosis                                                                                    
      Marked (&gt;50% of ducts)                              5 ( 0.2%)     0 ( 0.0%)     0 ( 0.00%)      5 (  0.2%)
                        Mild                             18 ( 0.6%)     0 ( 0.0%)     0 ( 0.00%)     18 (  0.6%)
                    Moderate                             23 ( 0.8%)     0 ( 0.0%)     0 ( 0.00%)     23 (  0.8%)
                 Not present                            196 ( 6.9%)     6 ( 0.2%)     0 ( 0.00%)    202 (  7.1%)
  Yes - extent not specified                            442 (15.5%)     9 ( 0.3%)     2 ( 0.07%)    453 ( 15.9%)
                        &lt;NA&gt;                           1231 (43.1%)   561 (19.6%)   363 (12.71%)   2155 ( 75.5%)
                       Total                           1915 (67.1%)   576 (20.2%)   365 (12.78%)   2856 (100.0%)
---------------------------- ----------------------- -------------- ------------- -------------- ---------------

No Invalid Values</code></pre>
</div>
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"ComedoNecrosis"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>No Missing Codes</code></pre>
</div>
</div>
</section>
<section id="section-26" class="level5">
<h5 class="anchored" data-anchor-id="section-26"></h5>
</section>
<section id="sizedcisonly" class="level5">
<h5 class="anchored" data-anchor-id="sizedcisonly">SizeDCISOnly</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(hpdata<span class="sc">$</span>SizeDCISOnly)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
   1.00    9.00   17.00   23.45   30.00  153.00    2458 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="fu">crosscheck_output</span>(<span class="st">"SizeDCISOnly"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>SizeDCISOnly for DuctalCarcinomaInsitu = Present : 
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
  1.000   8.875  17.000  23.504  30.000 153.000    1519 

SizeDCISOnly for DuctalCarcinomaInsitu = Not Present : 
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
     11      12      13      13      14      15     574 

SizeDCISOnly for DuctalCarcinomaInsitu = NA: 
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
     NA      NA      NA     NaN      NA      NA     365 


No Invalid Values</code></pre>
</div>
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(hpdata<span class="sc">$</span>SizeDCISOnly, <span class="at">main =</span> <span class="st">"Size of In Situ Carcinoma"</span>, <span class="at">xlab =</span> <span class="st">"Size (mm)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Histopathology-QC_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="section-27" class="level5">
<h5 class="anchored" data-anchor-id="section-27"></h5>
</section>
<section id="lobularcarcinomainsitu" class="level5">
<h5 class="anchored" data-anchor-id="lobularcarcinomainsitu">LobularCarcinomaInsitu</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"LobularCarcinomaInsitu"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                    Freq   % Valid   % Total
----------------- ------ --------- ---------
          Present    366     52.14     12.82
      Not present    336     47.86     11.76
             &lt;NA&gt;   2154               75.42
            Total   2856    100.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="fu">crosscheck_output</span>(<span class="st">"LobularCarcinomaInsitu"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Cross-Tabulation, Total Proportions  
InsituCarcinoma * LobularCarcinomaInsitu  

----------------- ------------------------ -------------- ------------- -------------- ---------------
                    LobularCarcinomaInsitu        Present   Not present           &lt;NA&gt;           Total
  InsituCarcinoma                                                                                     
          Present                            361 (12.64%)   240 ( 8.4%)   1520 (53.2%)   2121 ( 74.3%)
      Not Present                              4 ( 0.14%)    96 ( 3.4%)    397 (13.9%)    497 ( 17.4%)
             &lt;NA&gt;                              1 ( 0.04%)     0 ( 0.0%)    237 ( 8.3%)    238 (  8.3%)
            Total                            366 (12.82%)   336 (11.8%)   2154 (75.4%)   2856 (100.0%)
----------------- ------------------------ -------------- ------------- -------------- ---------------

4 Invalid Values where No Insitu Carcinoma Present, but LCIS Present 
Invalid Codes: T420G212, T435E514, T460F219, T490J879 

1 Invalid Values where Insitu Carcinoma Present NA, but LCIS Present 
Invalid Codes: T363G340 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"LobularCarcinomaInsitu"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>No Missing Codes</code></pre>
</div>
</div>
</section>
<section id="section-28" class="level5">
<h5 class="anchored" data-anchor-id="section-28"></h5>
</section>
<section id="pleomorphiclcis" class="level5">
<h5 class="anchored" data-anchor-id="pleomorphiclcis">PleomorphicLCIS</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"PleomorphicLCIS"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

              Freq   % Valid   % Total
----------- ------ --------- ---------
        Yes     29    100.00      1.02
       &lt;NA&gt;   2827               98.98
      Total   2856    100.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">crosscheck_output</span>(<span class="st">"PleomorphicLCIS"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Cross-Tabulation, Total Proportions  
LobularCarcinomaInsitu * PleomorphicLCIS  

------------------------ ----------------- ----------- -------------- ---------------
                           PleomorphicLCIS         Yes           &lt;NA&gt;           Total
  LobularCarcinomaInsitu                                                             
                 Present                     22 (0.8%)    344 (12.0%)    366 ( 12.8%)
             Not present                      0 (0.0%)    336 (11.8%)    336 ( 11.8%)
                    &lt;NA&gt;                      7 (0.2%)   2147 (75.2%)   2154 ( 75.4%)
                   Total                     29 (1.0%)   2827 (99.0%)   2856 (100.0%)
------------------------ ----------------- ----------- -------------- ---------------

7 Invalid Values where LCIS NA but Pleomorphic LCIS not NA 
Invalid Codes: T263H173, T273J199, T289H877, T319E954, T357C168, T392D113, T440G132 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"PleomorphicLCIS"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>No Missing Codes</code></pre>
</div>
</div>
</section>
<section id="section-29" class="level5">
<h5 class="anchored" data-anchor-id="section-29"></h5>
</section>
<section id="pagetsdisease" class="level5">
<h5 class="anchored" data-anchor-id="pagetsdisease">PagetsDisease</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"PagetsDisease"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                   Freq   % Valid   % Total
---------------- ------ --------- ---------
      No present    556     96.19     19.47
         Present     22      3.81      0.77
            &lt;NA&gt;   2278               79.76
           Total   2856    100.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"PagetsDisease"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>No Missing Codes</code></pre>
</div>
</div>
</section>
<section id="section-30" class="level5">
<h5 class="anchored" data-anchor-id="section-30"></h5>
</section>
<section id="microinvasion" class="level5">
<h5 class="anchored" data-anchor-id="microinvasion">Microinvasion</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"Microinvasion"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                    Freq   % Valid   % Total
----------------- ------ --------- ---------
      Not Present    377     83.59     13.20
          Present     74     16.41      2.59
             &lt;NA&gt;   2405               84.21
            Total   2856    100.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"Microinvasion"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>No Missing Codes</code></pre>
</div>
</div>
</section>
<section id="section-31" class="level5">
<h5 class="anchored" data-anchor-id="section-31"></h5>
</section>
</section>
<section id="invasive-carcinoma" class="level4">
<h4 class="anchored" data-anchor-id="invasive-carcinoma">Invasive Carcinoma</h4>
<section id="section-32" class="level5">
<h5 class="anchored" data-anchor-id="section-32"></h5>
</section>
<section id="invasivecarcinoma" class="level5">
<h5 class="anchored" data-anchor-id="invasivecarcinoma">InvasiveCarcinoma</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"InvasiveCarcinoma"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                    Freq   % Valid   % Total
----------------- ------ --------- ---------
          Present   2375     83.80     83.16
      Not Present    459     16.20     16.07
             &lt;NA&gt;     22                0.77
            Total   2856    100.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"InvasiveCarcinoma"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>No Missing Codes</code></pre>
</div>
</div>
</section>
<section id="section-33" class="level5">
<h5 class="anchored" data-anchor-id="section-33"></h5>
</section>
<section id="sizeinvasivetumour" class="level5">
<h5 class="anchored" data-anchor-id="sizeinvasivetumour">SizeInvasiveTumour</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(hpdata<span class="sc">$</span>SizeInvasiveTumour)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
   0.70   10.00   16.00   19.66   24.00  174.00     801 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(hpdata<span class="sc">$</span>SizeInvasiveTumour, <span class="at">main =</span> <span class="st">"Size of Invasive Tumour"</span>, <span class="at">xlab =</span> <span class="st">"Size (mm)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Histopathology-QC_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="section-34" class="level5">
<h5 class="anchored" data-anchor-id="section-34"></h5>
</section>
<section id="sizewholetumour" class="level5">
<h5 class="anchored" data-anchor-id="sizewholetumour">SizeWholeTumour</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(hpdata<span class="sc">$</span>SizeWholeTumour)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
   1.00   13.00   20.00   24.81   30.00  174.00     860 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(hpdata<span class="sc">$</span>SizeWholeTumour, <span class="at">main =</span> <span class="st">"Size of Whole Tumour"</span>, <span class="at">xlab =</span> <span class="st">"Size (mm)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Histopathology-QC_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="fu">crosscheck_output</span>(<span class="st">"SizeWholeTumour"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Histopathology-QC_files/figure-html/unnamed-chunk-35-2.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
4 Invalid Values where Invasive Tumour Larger than Whole Tumour 
Invalid Codes: T331J679, T354C704, T354C784, T404E090 </code></pre>
</div>
</div>
</section>
<section id="section-35" class="level5">
<h5 class="anchored" data-anchor-id="section-35"></h5>
</section>
<section id="type" class="level5">
<h5 class="anchored" data-anchor-id="type">Type</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"Type"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                           Freq   % Valid   % Total
------------------------ ------ --------- ---------
         No Special Type   1859     78.87     65.09
       Pure Special Type    380     16.12     13.31
        Mixed Tumour D/L     63      2.67      2.21
      Mixed Tumour Other     35      1.48      1.23
                   Other     20      0.85      0.70
                    &lt;NA&gt;    499               17.47
                   Total   2856    100.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="fu">crosscheck_output</span>(<span class="st">"Type"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Cross-Tabulation, Total Proportions  
Type * InvasiveCarcinoma  

-------------------- ------------------- -------------- ------------- ------------ ---------------
                       InvasiveCarcinoma        Present   Not Present         &lt;NA&gt;           Total
                Type                                                                              
     No Special Type                       1858 (65.1%)     0 ( 0.0%)    1 (0.04%)   1859 ( 65.1%)
   Pure Special Type                        380 (13.3%)     0 ( 0.0%)    0 (0.00%)    380 ( 13.3%)
    Mixed Tumour D/L                         63 ( 2.2%)     0 ( 0.0%)    0 (0.00%)     63 (  2.2%)
  Mixed Tumour Other                         35 ( 1.2%)     0 ( 0.0%)    0 (0.00%)     35 (  1.2%)
               Other                         20 ( 0.7%)     0 ( 0.0%)    0 (0.00%)     20 (  0.7%)
                &lt;NA&gt;                         19 ( 0.7%)   459 (16.1%)   21 (0.74%)    499 ( 17.5%)
               Total                       2375 (83.2%)   459 (16.1%)   22 (0.77%)   2856 (100.0%)
-------------------- ------------------- -------------- ------------- ------------ ---------------

1 Invalid Values where Invasive Tumour NA but Type is not NA 
Invalid Codes: T440G516 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"Type"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>No Missing Codes</code></pre>
</div>
</div>
</section>
<section id="section-36" class="level5">
<h5 class="anchored" data-anchor-id="section-36"></h5>
</section>
<section id="typecomponent" class="level5">
<h5 class="anchored" data-anchor-id="typecomponent">TypeComponent</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"TypeComponent"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                          Freq   % Valid   % Total
----------------------- ------ --------- ---------
                Lobular    316     51.22     11.06
                  Other     90     14.59      3.15
                Tubular     57      9.24      2.00
         Ductal/Lobular     52      8.43      1.82
               Mucinous     48      7.78      1.68
         Medullary Like     20      3.24      0.70
            Tubulobular     11      1.78      0.39
      Tubular/Cribiform     10      1.62      0.35
              Cribiform      7      1.13      0.25
              Papillary      6      0.97      0.21
                   &lt;NA&gt;   2239               78.40
                  Total   2856    100.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="fu">crosscheck_output</span>(<span class="st">"TypeComponent"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Cross-Tabulation, Total Proportions  
TypeComponent * InvasiveCarcinoma  

------------------- ------------------- -------------- ------------- ----------- ---------------
                      InvasiveCarcinoma        Present   Not Present        &lt;NA&gt;           Total
      TypeComponent                                                                             
  Tubular/Cribiform                         10 ( 0.4%)     0 ( 0.0%)    0 (0.0%)     10 (  0.4%)
          Papillary                          6 ( 0.2%)     0 ( 0.0%)    0 (0.0%)      6 (  0.2%)
              Other                         90 ( 3.2%)     0 ( 0.0%)    0 (0.0%)     90 (  3.2%)
     Ductal/Lobular                         52 ( 1.8%)     0 ( 0.0%)    0 (0.0%)     52 (  1.8%)
            Tubular                         57 ( 2.0%)     0 ( 0.0%)    0 (0.0%)     57 (  2.0%)
        Tubulobular                         11 ( 0.4%)     0 ( 0.0%)    0 (0.0%)     11 (  0.4%)
          Cribiform                          7 ( 0.2%)     0 ( 0.0%)    0 (0.0%)      7 (  0.2%)
           Mucinous                         48 ( 1.7%)     0 ( 0.0%)    0 (0.0%)     48 (  1.7%)
     Medullary Like                         20 ( 0.7%)     0 ( 0.0%)    0 (0.0%)     20 (  0.7%)
            Lobular                        316 (11.1%)     0 ( 0.0%)    0 (0.0%)    316 ( 11.1%)
               &lt;NA&gt;                       1758 (61.6%)   459 (16.1%)   22 (0.8%)   2239 ( 78.4%)
              Total                       2375 (83.2%)   459 (16.1%)   22 (0.8%)   2856 (100.0%)
------------------- ------------------- -------------- ------------- ----------- ---------------

Cross-Tabulation, Total Proportions  
TypeComponent * Type  

------------------- ------ ----------------- ------------------- ------------------ -------------------- ------------ ------------- ---------------
                      Type   No Special Type   Pure Special Type   Mixed Tumour D/L   Mixed Tumour Other        Other          &lt;NA&gt;           Total
      TypeComponent                                                                                                                                
  Tubular/Cribiform               4 ( 0.14%)          2 ( 0.07%)          0 (0.00%)            4 (0.14%)    0 (0.00%)     0 ( 0.0%)     10 (  0.4%)
          Papillary               3 ( 0.11%)          2 ( 0.07%)          0 (0.00%)            1 (0.04%)    0 (0.00%)     0 ( 0.0%)      6 (  0.2%)
              Other              57 ( 2.00%)          8 ( 0.28%)          0 (0.00%)           17 (0.60%)    8 (0.28%)     0 ( 0.0%)     90 (  3.2%)
     Ductal/Lobular               1 ( 0.04%)          0 ( 0.00%)         50 (1.75%)            1 (0.04%)    0 (0.00%)     0 ( 0.0%)     52 (  1.8%)
            Tubular              31 ( 1.09%)         25 ( 0.88%)          0 (0.00%)            1 (0.04%)    0 (0.00%)     0 ( 0.0%)     57 (  2.0%)
        Tubulobular               1 ( 0.04%)          7 ( 0.25%)          1 (0.04%)            2 (0.07%)    0 (0.00%)     0 ( 0.0%)     11 (  0.4%)
          Cribiform               4 ( 0.14%)          2 ( 0.07%)          0 (0.00%)            0 (0.00%)    1 (0.04%)     0 ( 0.0%)      7 (  0.2%)
           Mucinous              22 ( 0.77%)         25 ( 0.88%)          0 (0.00%)            1 (0.04%)    0 (0.00%)     0 ( 0.0%)     48 (  1.7%)
     Medullary Like              18 ( 0.63%)          2 ( 0.07%)          0 (0.00%)            0 (0.00%)    0 (0.00%)     0 ( 0.0%)     20 (  0.7%)
            Lobular               8 ( 0.28%)        306 (10.71%)          2 (0.07%)            0 (0.00%)    0 (0.00%)     0 ( 0.0%)    316 ( 11.1%)
               &lt;NA&gt;            1710 (59.87%)          1 ( 0.04%)         10 (0.35%)            8 (0.28%)   11 (0.39%)   499 (17.5%)   2239 ( 78.4%)
              Total            1859 (65.09%)        380 (13.31%)         63 (2.21%)           35 (1.23%)   20 (0.70%)   499 (17.5%)   2856 (100.0%)
------------------- ------ ----------------- ------------------- ------------------ -------------------- ------------ ------------- ---------------

468 Invalid Values where Type not 'No Special Type' but Type Component not NA </code></pre>
</div>
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"TypeComponent"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>No Missing Codes</code></pre>
</div>
</div>
</section>
<section id="section-37" class="level5">
<h5 class="anchored" data-anchor-id="section-37"></h5>
</section>
<section id="invasivegrade" class="level5">
<h5 class="anchored" data-anchor-id="invasivegrade">InvasiveGrade</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"InvasiveGrade"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                                  Freq   % Valid   % Total
------------------------------- ------ --------- ---------
      Moderately Differentiated   1156     50.00     40.48
          Poorly Differentiated    727     31.44     25.46
            Well Differentiated    417     18.04     14.60
                 Not Assessable     12      0.52      0.42
                           &lt;NA&gt;    544               19.05
                          Total   2856    100.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="fu">crosscheck_output</span>(<span class="st">"InvasiveGrade"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Cross-Tabulation, Total Proportions  
InvasiveGrade * InvasiveCarcinoma  

--------------------------- ------------------- -------------- ------------- ------------ ---------------
                              InvasiveCarcinoma        Present   Not Present         &lt;NA&gt;           Total
              InvasiveGrade                                                                              
        Well Differentiated                        417 (14.6%)     0 ( 0.0%)    0 (0.00%)    417 ( 14.6%)
  Moderately Differentiated                       1156 (40.5%)     0 ( 0.0%)    0 (0.00%)   1156 ( 40.5%)
      Poorly Differentiated                        726 (25.4%)     0 ( 0.0%)    1 (0.04%)    727 ( 25.5%)
             Not Assessable                         12 ( 0.4%)     0 ( 0.0%)    0 (0.00%)     12 (  0.4%)
                       &lt;NA&gt;                         64 ( 2.2%)   459 (16.1%)   21 (0.74%)    544 ( 19.0%)
                      Total                       2375 (83.2%)   459 (16.1%)   22 (0.77%)   2856 (100.0%)
--------------------------- ------------------- -------------- ------------- ------------ ---------------

1 Invalid Values where Invasive Tumour NA but Grade is not NA 
Invalid Codes: T440G516 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"InvasiveGrade"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1 Missing Codes
Missing Codes: 1 </code></pre>
</div>
</div>
<p>Seems to be a 1. in the dataset that just needs changing.</p>
</section>
<section id="section-38" class="level5">
<h5 class="anchored" data-anchor-id="section-38"></h5>
</section>
<section id="tubules" class="level5">
<h5 class="anchored" data-anchor-id="tubules">Tubules</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"Tubules"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                     Freq   % Valid   % Total
------------------ ------ --------- ---------
              &lt;10%   1113     66.65     38.97
      &gt;=10% to 75%    394     23.59     13.80
              &gt;75%    163      9.76      5.71
              &lt;NA&gt;   1186               41.53
             Total   2856    100.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="fu">crosscheck_output</span>(<span class="st">"Tubules"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Cross-Tabulation, Total Proportions  
Tubules * InvasiveCarcinoma  

-------------- ------------------- -------------- ------------- ------------ ---------------
                 InvasiveCarcinoma        Present   Not Present         &lt;NA&gt;           Total
       Tubules                                                                              
          &gt;75%                        163 ( 5.7%)     0 ( 0.0%)    0 (0.00%)    163 (  5.7%)
  &gt;=10% to 75%                        394 (13.8%)     0 ( 0.0%)    0 (0.00%)    394 ( 13.8%)
          &lt;10%                       1112 (38.9%)     0 ( 0.0%)    1 (0.04%)   1113 ( 39.0%)
          &lt;NA&gt;                        706 (24.7%)   459 (16.1%)   21 (0.74%)   1186 ( 41.5%)
         Total                       2375 (83.2%)   459 (16.1%)   22 (0.77%)   2856 (100.0%)
-------------- ------------------- -------------- ------------- ------------ ---------------

1 Invalid Values where Invasive Tumour NA but Tubules is not NA 
Invalid Codes: T440G516 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"Tubules"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>No Missing Codes</code></pre>
</div>
</div>
</section>
<section id="section-39" class="level5">
<h5 class="anchored" data-anchor-id="section-39"></h5>
</section>
<section id="pleomorphism" class="level5">
<h5 class="anchored" data-anchor-id="pleomorphism">Pleomorphism</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"Pleomorphism"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                 Freq   % Valid   % Total
-------------- ------ --------- ---------
          High    892     53.35     31.23
      Moderate    726     43.42     25.42
           Low     54      3.23      1.89
          &lt;NA&gt;   1184               41.46
         Total   2856    100.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="fu">crosscheck_output</span>(<span class="st">"Pleomorphism"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Cross-Tabulation, Total Proportions  
Pleomorphism * InvasiveCarcinoma  

-------------- ------------------- -------------- ------------- ------------ ---------------
                 InvasiveCarcinoma        Present   Not Present         &lt;NA&gt;           Total
  Pleomorphism                                                                              
           Low                         54 ( 1.9%)     0 ( 0.0%)    0 (0.00%)     54 (  1.9%)
      Moderate                        726 (25.4%)     0 ( 0.0%)    0 (0.00%)    726 ( 25.4%)
          High                        891 (31.2%)     0 ( 0.0%)    1 (0.04%)    892 ( 31.2%)
          &lt;NA&gt;                        704 (24.6%)   459 (16.1%)   21 (0.74%)   1184 ( 41.5%)
         Total                       2375 (83.2%)   459 (16.1%)   22 (0.77%)   2856 (100.0%)
-------------- ------------------- -------------- ------------- ------------ ---------------

1 Invalid Values where Invasive Tumour NA but Pleomorphism is not NA 
Invalid Codes: T440G516 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"Pleomorphism"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>No Missing Codes</code></pre>
</div>
</div>
</section>
<section id="section-40" class="level5">
<h5 class="anchored" data-anchor-id="section-40"></h5>
</section>
<section id="mitoticactivity" class="level5">
<h5 class="anchored" data-anchor-id="mitoticactivity">MitoticActivity</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"MitoticActivity"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                 Freq   % Valid   % Total
-------------- ------ --------- ---------
           Low   1030     61.64     36.06
      Moderate    356     21.30     12.46
          High    285     17.06      9.98
          &lt;NA&gt;   1185               41.49
         Total   2856    100.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb177"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="fu">crosscheck_output</span>(<span class="st">"MitoticActivity"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Cross-Tabulation, Total Proportions  
MitoticActivity * InvasiveCarcinoma  

----------------- ------------------- -------------- ------------- ------------ ---------------
                    InvasiveCarcinoma        Present   Not Present         &lt;NA&gt;           Total
  MitoticActivity                                                                              
              Low                       1030 (36.1%)     0 ( 0.0%)    0 (0.00%)   1030 ( 36.1%)
         Moderate                        356 (12.5%)     0 ( 0.0%)    0 (0.00%)    356 ( 12.5%)
             High                        284 ( 9.9%)     0 ( 0.0%)    1 (0.04%)    285 ( 10.0%)
             &lt;NA&gt;                        705 (24.7%)   459 (16.1%)   21 (0.74%)   1185 ( 41.5%)
            Total                       2375 (83.2%)   459 (16.1%)   22 (0.77%)   2856 (100.0%)
----------------- ------------------- -------------- ------------- ------------ ---------------

1 Invalid Values where Invasive Tumour NA but Mitotic Activity is not NA 
Invalid Codes: T440G516 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb179"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"MitoticActivity"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>No Missing Codes</code></pre>
</div>
</div>
</section>
<section id="section-41" class="level5">
<h5 class="anchored" data-anchor-id="section-41"></h5>
</section>
<section id="tumourextent" class="level5">
<h5 class="anchored" data-anchor-id="tumourextent">TumourExtent</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"TumourExtent"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                            Freq   % Valid   % Total
------------------------- ------ --------- ---------
                Localised    678     70.62     23.74
      Multi Invasive Foci    265     27.60      9.28
                 Unifocal     17      1.77      0.60
                     &lt;NA&gt;   1896               66.39
                    Total   2856    100.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"TumourExtent"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>No Missing Codes</code></pre>
</div>
</div>
</section>
</section>
<section id="lymph-nodes" class="level4">
<h4 class="anchored" data-anchor-id="lymph-nodes">Lymph Nodes</h4>
<section id="section-42" class="level5">
<h5 class="anchored" data-anchor-id="section-42"></h5>
</section>
<section id="vascularinvasion" class="level5">
<h5 class="anchored" data-anchor-id="vascularinvasion">VascularInvasion</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb185"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"VascularInvasion"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                 Freq   % Valid   % Total
-------------- ------ --------- ---------
      Not Seen   1556     73.50     54.48
       Present    470     22.20     16.46
      Possible     91      4.30      3.19
          &lt;NA&gt;    739               25.88
         Total   2856    100.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb187"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"VascularInvasion"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>No Missing Codes</code></pre>
</div>
</div>
</section>
<section id="section-43" class="level5">
<h5 class="anchored" data-anchor-id="section-43"></h5>
</section>
<section id="axillarynodespresent" class="level5">
<h5 class="anchored" data-anchor-id="axillarynodespresent">AxillaryNodesPresent</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb189"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"AxillaryNodesPresent"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

              Freq   % Valid   % Total
----------- ------ --------- ---------
        Yes   2049     93.26     71.74
         No    148      6.74      5.18
       &lt;NA&gt;    659               23.07
      Total   2856    100.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb191"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"AxillaryNodesPresent"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1 Missing Codes
Missing Codes: y</code></pre>
</div>
</div>
<p>Case issue here.</p>
</section>
<section id="section-44" class="level5">
<h5 class="anchored" data-anchor-id="section-44"></h5>
</section>
<section id="axillarynodestotal" class="level5">
<h5 class="anchored" data-anchor-id="axillarynodestotal">AxillaryNodesTotal</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb193"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(hpdata<span class="sc">$</span>AxillaryNodesTotal)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
  1.000   2.000   3.000   5.887   7.000  37.000     809 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb195"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="fu">crosscheck_output</span>(<span class="st">"AxillaryNodesTotal"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>AxillaryNodesTotal for AxillaryNodesPresent = Yes : 
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
  1.000   2.000   3.000   5.876   7.000  37.000       4 

AxillaryNodesTotal for AxillaryNodesPresent = No : 
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
     NA      NA      NA     NaN      NA      NA     148 

AxillaryNodesTotal for AxillaryNodesPresent = NA: 
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
      5       5       5       5       5       5     657 


1 Invalid Values where Axillary Nodes NA but Total Nodes not NA 
Invalid Codes: T389C520 </code></pre>
</div>
</div>
</section>
<section id="section-45" class="level5">
<h5 class="anchored" data-anchor-id="section-45"></h5>
</section>
<section id="axillarynodespositive" class="level5">
<h5 class="anchored" data-anchor-id="axillarynodespositive">AxillaryNodesPositive</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb197"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(hpdata<span class="sc">$</span>AxillaryNodesPositive)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
 0.0000  0.0000  0.0000  0.9346  1.0000 26.0000     807 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb199"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="fu">crosscheck_output</span>(<span class="st">"AxillaryNodesPositive"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>AxillaryNodesPositive for AxillaryNodesPresent = Yes : 
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
 0.0000  0.0000  0.0000  0.9311  1.0000 26.0000       2 

AxillaryNodesPositive for AxillaryNodesPresent = No : 
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
     NA      NA      NA     NaN      NA      NA     148 

AxillaryNodesPositive for AxillaryNodesPresent = NA: 
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
      1       1       1       1       1       1     657 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="Histopathology-QC_files/figure-html/unnamed-chunk-46-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
1 Invalid Values where Axillary Nodes NA but Positive Nodes not NA 
Invalid Codes: T389C520 </code></pre>
</div>
</div>
</section>
<section id="section-46" class="level5">
<h5 class="anchored" data-anchor-id="section-46"></h5>
</section>
<section id="singlenodepositivity" class="level5">
<h5 class="anchored" data-anchor-id="singlenodepositivity">SingleNodePositivity</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb202"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"SingleNodePositivity"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                              Freq   % Valid   % Total
--------------------------- ------ --------- ---------
                 Metastasis    229     69.82      8.02
            Micrometastasis     88     26.83      3.08
      Isolated Tumour Cells     11      3.35      0.39
                       &lt;NA&gt;   2528               88.52
                      Total   2856    100.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb204"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"SingleNodePositivity"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>No Missing Codes</code></pre>
</div>
</div>
</section>
<section id="section-47" class="level5">
<h5 class="anchored" data-anchor-id="section-47"></h5>
</section>
<section id="othernodespresent" class="level5">
<h5 class="anchored" data-anchor-id="othernodespresent">OtherNodesPresent</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb206"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"OtherNodesPresent"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

              Freq   % Valid   % Total
----------- ------ --------- ---------
         No    296     73.27     10.36
        Yes    108     26.73      3.78
       &lt;NA&gt;   2452               85.85
      Total   2856    100.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb208"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb208-1"><a href="#cb208-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"OtherNodesPresent"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>No Missing Codes</code></pre>
</div>
</div>
</section>
<section id="section-48" class="level5">
<h5 class="anchored" data-anchor-id="section-48"></h5>
</section>
<section id="othernodestotal" class="level5">
<h5 class="anchored" data-anchor-id="othernodestotal">OtherNodesTotal</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb210"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb210-1"><a href="#cb210-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(hpdata<span class="sc">$</span>OtherNodesTotal)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
  0.000   1.000   2.000   1.982   2.000  12.000    2747 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb212"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb212-1"><a href="#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="fu">crosscheck_output</span>(<span class="st">"OtherNodesTotal"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>OtherNodesTotal for OtherNodesPresent = Yes : 
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
      0       1       2       2       2      12 

OtherNodesTotal for OtherNodesPresent = No : 
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
      0       0       0       0       0       0     295 

OtherNodesTotal for OtherNodesPresent = NA: 
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
     NA      NA      NA     NaN      NA      NA    2452 


1 Invalid Values where Other Nodes Not Present but Total Nodes not NA 
Invalid Codes: T384J807 </code></pre>
</div>
</div>
</section>
<section id="section-49" class="level5">
<h5 class="anchored" data-anchor-id="section-49"></h5>
</section>
<section id="othernodespositive" class="level5">
<h5 class="anchored" data-anchor-id="othernodespositive">OtherNodesPositive</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb214"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb214-1"><a href="#cb214-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(hpdata<span class="sc">$</span>OtherNodesPositive)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
 0.0000  0.0000  0.0000  0.2936  0.0000  3.0000    2747 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb216"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb216-1"><a href="#cb216-1" aria-hidden="true" tabindex="-1"></a><span class="fu">crosscheck_output</span>(<span class="st">"OtherNodesPositive"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>OtherNodesPositive for OtherNodesPresent = Yes : 
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
 0.0000  0.0000  0.0000  0.2963  0.0000  3.0000 

OtherNodesPositive for OtherNodesPresent = No : 
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
      0       0       0       0       0       0     295 

OtherNodesPositive for OtherNodesPresent = NA: 
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
     NA      NA      NA     NaN      NA      NA    2452 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="Histopathology-QC_files/figure-html/unnamed-chunk-50-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
1 Invalid Values where Other Nodes Not Present but Positive Nodes not NA 
Invalid Codes: T384J807 

1 Invalid Values where More Positive Nodes than Total Nodes 
Invalid Codes: T308I750 </code></pre>
</div>
</div>
</section>
<section id="section-50" class="level5">
<h5 class="anchored" data-anchor-id="section-50"></h5>
</section>
</section>
<section id="tnm-stage" class="level4">
<h4 class="anchored" data-anchor-id="tnm-stage">TNM Stage</h4>
<p>Lots of ‘Missing Codes’ in the dictionary. I have split coding in pre, main, and post and gone by the specifications in the data dictionary. This causes lots of missing codes as inputs can vary greatly for these variables based on the person writing the pathology report.</p>
<section id="section-51" class="level5">
<h5 class="anchored" data-anchor-id="section-51"></h5>
</section>
<section id="tstage" class="level5">
<h5 class="anchored" data-anchor-id="tstage">Tstage</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb219"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb219-1"><a href="#cb219-1" aria-hidden="true" tabindex="-1"></a>preTstage <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"c"</span>, <span class="st">"p"</span>, <span class="st">"yp"</span>, <span class="st">"yc"</span>, <span class="st">""</span>)</span>
<span id="cb219-2"><a href="#cb219-2" aria-hidden="true" tabindex="-1"></a>mainTstage <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"TX"</span>, <span class="st">"T0"</span>, <span class="st">"Tis"</span>, <span class="st">"T1"</span>, <span class="st">"T1mic"</span>, <span class="st">"T1mi"</span>, <span class="st">"T1a"</span>, <span class="st">"T1b"</span>, <span class="st">"T1c"</span>, <span class="st">"T2"</span>, <span class="st">"T3"</span>, <span class="st">"T4"</span>, <span class="st">"T4a"</span>, <span class="st">"T4b"</span>, <span class="st">"T4c"</span>, <span class="st">"T4d"</span>)</span>
<span id="cb219-3"><a href="#cb219-3" aria-hidden="true" tabindex="-1"></a>postTstage <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"m"</span>, <span class="st">""</span>)</span>
<span id="cb219-4"><a href="#cb219-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb219-5"><a href="#cb219-5" aria-hidden="true" tabindex="-1"></a>Tstagecodes <span class="ot">&lt;-</span> <span class="fu">character</span>(<span class="dv">0</span>)</span>
<span id="cb219-6"><a href="#cb219-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb219-7"><a href="#cb219-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(pre <span class="cf">in</span> preTstage){</span>
<span id="cb219-8"><a href="#cb219-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(main <span class="cf">in</span> mainTstage){</span>
<span id="cb219-9"><a href="#cb219-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(post <span class="cf">in</span> postTstage){</span>
<span id="cb219-10"><a href="#cb219-10" aria-hidden="true" tabindex="-1"></a>      Tstagecodes <span class="ot">&lt;-</span> <span class="fu">append</span>(Tstagecodes, <span class="fu">paste0</span>(pre, main, post))</span>
<span id="cb219-11"><a href="#cb219-11" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb219-12"><a href="#cb219-12" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb219-13"><a href="#cb219-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb219-14"><a href="#cb219-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb219-15"><a href="#cb219-15" aria-hidden="true" tabindex="-1"></a>missing_codes <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(<span class="fu">unique</span>(hpdata<span class="sc">$</span>Tstage)[<span class="sc">!</span><span class="fu">is.na</span>(<span class="fu">unique</span>(hpdata<span class="sc">$</span>Tstage))], Tstagecodes)</span>
<span id="cb219-16"><a href="#cb219-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb219-17"><a href="#cb219-17" aria-hidden="true" tabindex="-1"></a><span class="fu">freq</span>(hpdata<span class="sc">$</span>Tstage[hpdata<span class="sc">$</span>Tstage<span class="sc">%in%</span>Tstagecodes], <span class="at">cumul =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  
hpdata$Tstage  
Label: Tumour staging  for extent (size) of the primary tumor   -  taken as reported, could follow different  editions of American Joint Committee on Cancer (AJCC) guidances  
Type: Character  

               Freq   % Valid   % Total
------------ ------ --------- ---------
         pT0      1      0.09      0.09
         pT1    121     10.90     10.90
        pT1a     43      3.87      3.87
        pT1b    151     13.60     13.60
        pT1c    305     27.48     27.48
       pT1mi      2      0.18      0.18
      pT1mic      2      0.18      0.18
         pT2    289     26.04     26.04
        pT2m      1      0.09      0.09
         pT3     48      4.32      4.32
         pT4      1      0.09      0.09
        pT4b      1      0.09      0.09
        pTis     56      5.05      5.05
         pTX      5      0.45      0.45
          T1      8      0.72      0.72
         T1b      4      0.36      0.36
         T1c      5      0.45      0.45
          T2      9      0.81      0.81
          T3      1      0.09      0.09
         Tis      1      0.09      0.09
        ypT0     10      0.90      0.90
        ypT1      4      0.36      0.36
       ypT1a      3      0.27      0.27
       ypT1b      3      0.27      0.27
       ypT1c     13      1.17      1.17
        ypT2     14      1.26      1.26
        ypT3      4      0.36      0.36
       ypT4a      1      0.09      0.09
       ypT4b      1      0.09      0.09
       ypTis      3      0.27      0.27
        &lt;NA&gt;      0                0.00
       Total   1110    100.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb221"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb221-1"><a href="#cb221-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="fu">length</span>(missing_codes)<span class="sc">&gt;</span><span class="dv">0</span>){</span>
<span id="cb221-2"><a href="#cb221-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste</span>(<span class="fu">length</span>(missing_codes), <span class="st">"Missing Codes"</span>), <span class="fu">paste</span>(<span class="st">"Missing Codes:"</span>, <span class="fu">paste</span>(missing_codes, <span class="at">collapse =</span> <span class="st">", "</span>)), <span class="at">sep =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb221-3"><a href="#cb221-3" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb221-4"><a href="#cb221-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"No Missing Codes"</span>)</span>
<span id="cb221-5"><a href="#cb221-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>41 Missing Codes
Missing Codes: pT2(m), pTis(DCIS), yPT2, yT2, pT1C, pT11, pT1C(m), pT1c(m), pT1b(m), 1b, pT1 G3, yTis, pT3(m), ypT1(multifocal, pT1 G1, pT1c/pT1c, pTis papillary, pT1c(3), pT1c(2), ypTis(DCIS), pTc, NA, pT2 G3, pTis (DCIS), pT, p, pT1(micro), pTx, pN0, pt1a, G3 T2, ypT2a, pTic, ypTx, pT1c (multi), y, pT2(2), pTis - DCIS, pT`c, pT1c(4), pT1a/pT1b</code></pre>
</div>
<div class="sourceCode cell-code" id="cb223"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb223-1"><a href="#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ctable</span>(hpdata<span class="sc">$</span>Tstage, hpdata<span class="sc">$</span>TStageMod, <span class="at">useNA =</span> <span class="st">"always"</span>, <span class="at">prop =</span> <span class="st">"n"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Cross-Tabulation  
Tstage * TStageMod  
Data Frame: hpdata  

----------------- ----------- ---- ----- ----- ---- ---- ----- ---- ------ -------
                    TStageMod   T0    T1    T2   T3   T4   Tis   Tx   &lt;NA&gt;   Total
           Tstage                                                                 
               1b                0     1     0    0    0     0    0      0       1
            G3 T2                0     0     1    0    0     0    0      0       1
               NA                0     0     0    0    0     0    0      2       2
                p                0     0     0    0    0     0    0      1       1
              pN0                0     0     0    0    0     0    0      1       1
               pT                0     0     0    0    0     0    0      2       2
             pT`c                0     0     0    0    0     0    0      1       1
              pT0                0     0     0    0    0     0    0      1       1
              pT1                0   121     0    0    0     0    0      0     121
           pT1 G1                0     1     0    0    0     0    0      0       1
           pT1 G3                0     1     0    0    0     0    0      0       1
       pT1(micro)                0     1     0    0    0     0    0      0       1
             pT11                0     1     0    0    0     0    0      0       1
             pt1a                0     1     0    0    0     0    0      0       1
             pT1a                0    43     0    0    0     0    0      0      43
        pT1a/pT1b                0     1     0    0    0     0    0      0       1
             pT1b                0   151     0    0    0     0    0      0     151
          pT1b(m)                0     3     0    0    0     0    0      0       3
             pT1c                0   305     0    0    0     0    0      0     305
             pT1C                0     2     0    0    0     0    0      0       2
     pT1c (multi)                0     1     0    0    0     0    0      0       1
          pT1c(2)                0     1     0    0    0     0    0      0       1
          pT1c(3)                0     1     0    0    0     0    0      0       1
          pT1c(4)                0     1     0    0    0     0    0      0       1
          pT1c(m)                0     6     0    0    0     0    0      0       6
          pT1C(m)                0     1     0    0    0     0    0      0       1
        pT1c/pT1c                0     1     0    0    0     0    0      0       1
            pT1mi                0     2     0    0    0     0    0      0       2
           pT1mic                0     2     0    0    0     0    0      0       2
              pT2                0     0   289    0    0     0    0      0     289
           pT2 G3                0     0     1    0    0     0    0      0       1
           pT2(2)                0     0     1    0    0     0    0      0       1
           pT2(m)                0     0     7    0    0     0    0      0       7
             pT2m                0     0     1    0    0     0    0      0       1
              pT3                0     0     0   48    0     0    0      0      48
           pT3(m)                0     0     0    1    0     0    0      0       1
              pT4                0     0     0    0    1     0    0      0       1
             pT4b                0     0     0    0    1     0    0      0       1
              pTc                0     0     0    0    0     0    1      1       2
             pTic                0     0     0    0    0     0    0      2       2
             pTis                0     0     0    0    0    56    0      0      56
      pTis - DCIS                0     0     0    0    0     1    0      0       1
      pTis (DCIS)                0     0     0    0    0     5    0      0       5
   pTis papillary                0     0     0    0    0     1    0      0       1
       pTis(DCIS)                0     0     0    0    0    36    0      0      36
              pTx                0     0     0    0    0     0    1      0       1
              pTX                0     0     0    0    0     0    4      1       5
               T1                0     8     0    0    0     0    0      0       8
              T1b                0     4     0    0    0     0    0      0       4
              T1c                0     5     0    0    0     0    0      0       5
               T2                0     0     9    0    0     0    0      0       9
               T3                0     0     0    1    0     0    0      0       1
              Tis                0     0     0    0    0     1    0      0       1
                y                0     0     0    0    0     0    0      1       1
             ypT0                1     0     0    0    0     0    0      9      10
             ypT1                0     4     0    0    0     0    0      0       4
  ypT1(multifocal                0     1     0    0    0     0    0      0       1
            ypT1a                0     3     0    0    0     0    0      0       3
            ypT1b                0     3     0    0    0     0    0      0       3
            ypT1c                0    13     0    0    0     0    0      0      13
             ypT2                0     0    14    0    0     0    0      0      14
             yPT2                0     0     1    0    0     0    0      0       1
            ypT2a                0     0     1    0    0     0    0      0       1
             ypT3                0     0     0    4    0     0    0      0       4
            ypT4a                0     0     0    0    1     0    0      0       1
            ypT4b                0     0     0    0    1     0    0      0       1
            ypTis                0     0     0    0    0     3    0      0       3
      ypTis(DCIS)                0     0     0    0    0     3    0      0       3
             ypTx                0     0     0    0    0     0    0      2       2
              yT2                0     0     1    0    0     0    0      0       1
             yTis                0     0     0    0    0     1    0      0       1
             &lt;NA&gt;                0     0     0    0    0     0    0   1645    1645
            Total                1   689   326   54    4   107    6   1669    2856
----------------- ----------- ---- ----- ----- ---- ---- ----- ---- ------ -------</code></pre>
</div>
<div class="sourceCode cell-code" id="cb225"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb225-1"><a href="#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="do">### ATTEMPT AT GRABBING SUBGROUPS - DISCUSS WITH MONTSE</span></span>
<span id="cb225-2"><a href="#cb225-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-3"><a href="#cb225-3" aria-hidden="true" tabindex="-1"></a><span class="co"># TStage_2_codes &lt;- c("T0", "T1", "T2", "T3", "T4", "Tis", "Tx") #Might want to think about TX vs Tx and fixing that</span></span>
<span id="cb225-4"><a href="#cb225-4" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb225-5"><a href="#cb225-5" aria-hidden="true" tabindex="-1"></a><span class="co"># hpdata$TStage_2 = sapply(hpdata$Tstage, function(x){</span></span>
<span id="cb225-6"><a href="#cb225-6" aria-hidden="true" tabindex="-1"></a><span class="co">#     str_extract(x, paste(TStage_2_codes, collapse = "|"))</span></span>
<span id="cb225-7"><a href="#cb225-7" aria-hidden="true" tabindex="-1"></a><span class="co">#   })</span></span>
<span id="cb225-8"><a href="#cb225-8" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb225-9"><a href="#cb225-9" aria-hidden="true" tabindex="-1"></a><span class="co"># table(hpdata$TStage_2, hpdata$TStageMod, useNA = "always")</span></span>
<span id="cb225-10"><a href="#cb225-10" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb225-11"><a href="#cb225-11" aria-hidden="true" tabindex="-1"></a><span class="co"># unique(hpdata$Tstage[hpdata$TStage_2!=hpdata$TStageMod &amp; (!is.na(hpdata$TStageMod) | !is.na(hpdata$TStage_2))])</span></span>
<span id="cb225-12"><a href="#cb225-12" aria-hidden="true" tabindex="-1"></a><span class="co"># unique(hpdata$Tstage[is.na(hpdata$TStageMod) | is.na(hpdata$TStage_2)])</span></span>
<span id="cb225-13"><a href="#cb225-13" aria-hidden="true" tabindex="-1"></a><span class="co"># unique(hpdata$Tstage[is.na(hpdata$TStage_2)])</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-52" class="level5">
<h5 class="anchored" data-anchor-id="section-52"></h5>
</section>
<section id="nstage" class="level5">
<h5 class="anchored" data-anchor-id="nstage">NStage</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb226"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb226-1"><a href="#cb226-1" aria-hidden="true" tabindex="-1"></a>preNstage <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"c"</span>, <span class="st">"p"</span>, <span class="st">""</span>)</span>
<span id="cb226-2"><a href="#cb226-2" aria-hidden="true" tabindex="-1"></a>mainNstage <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"NX"</span>, <span class="st">"N0"</span>, <span class="st">"N1"</span>, <span class="st">"N1mi"</span>, <span class="st">"N1a"</span>, <span class="st">"N1b"</span>, <span class="st">"N1c"</span>, <span class="st">"N2"</span>, <span class="st">"N2a"</span>, <span class="st">"N2b"</span>, <span class="st">"N3"</span>, <span class="st">"N3a"</span>, <span class="st">"N3b"</span>, <span class="st">"N3c"</span>)</span>
<span id="cb226-3"><a href="#cb226-3" aria-hidden="true" tabindex="-1"></a>postNstage <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"(sn)"</span>, <span class="st">"(ONSA)"</span>, <span class="st">""</span>)</span>
<span id="cb226-4"><a href="#cb226-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-5"><a href="#cb226-5" aria-hidden="true" tabindex="-1"></a>Nstagecodes <span class="ot">&lt;-</span> <span class="fu">character</span>(<span class="dv">0</span>)</span>
<span id="cb226-6"><a href="#cb226-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-7"><a href="#cb226-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(pre <span class="cf">in</span> preNstage){</span>
<span id="cb226-8"><a href="#cb226-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(main <span class="cf">in</span> mainNstage){</span>
<span id="cb226-9"><a href="#cb226-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(post <span class="cf">in</span> postNstage){</span>
<span id="cb226-10"><a href="#cb226-10" aria-hidden="true" tabindex="-1"></a>      Nstagecodes <span class="ot">&lt;-</span> <span class="fu">append</span>(Nstagecodes, <span class="fu">paste0</span>(pre, main, post))</span>
<span id="cb226-11"><a href="#cb226-11" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb226-12"><a href="#cb226-12" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb226-13"><a href="#cb226-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb226-14"><a href="#cb226-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-15"><a href="#cb226-15" aria-hidden="true" tabindex="-1"></a><span class="co">#freq(hpdata$Nstage) #Maybe don't include this.</span></span>
<span id="cb226-16"><a href="#cb226-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-17"><a href="#cb226-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-18"><a href="#cb226-18" aria-hidden="true" tabindex="-1"></a>missing_codes <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(<span class="fu">unique</span>(hpdata<span class="sc">$</span>NStage)[<span class="sc">!</span><span class="fu">is.na</span>(<span class="fu">unique</span>(hpdata<span class="sc">$</span>NStage))], Nstagecodes)</span>
<span id="cb226-19"><a href="#cb226-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-20"><a href="#cb226-20" aria-hidden="true" tabindex="-1"></a><span class="fu">freq</span>(hpdata<span class="sc">$</span>NStage[hpdata<span class="sc">$</span>NStage<span class="sc">%in%</span>Nstagecodes])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  
hpdata$NStage  
Label: Lymph Node staging, describes whether the cancer has spread to the lymph nodes  
Type: Character  

                  Freq   % Valid   % Valid Cum.   % Total   % Total Cum.
--------------- ------ --------- -------------- --------- --------------
             N0    143     14.68          14.68     14.68          14.68
         N0(sn)     42      4.31          18.99      4.31          18.99
             N1     44      4.52          23.51      4.52          23.51
         N1(sn)      3      0.31          23.82      0.31          23.82
            N1a      5      0.51          24.33      0.51          24.33
        N1a(sn)      3      0.31          24.64      0.31          24.64
            N1c      1      0.10          24.74      0.10          24.74
           N1mi      4      0.41          25.15      0.41          25.15
             N2     11      1.13          26.28      1.13          26.28
            N2a      2      0.21          26.49      0.21          26.49
             N3      1      0.10          26.59      0.10          26.59
            N3a      3      0.31          26.90      0.31          26.90
             NX      6      0.62          27.52      0.62          27.52
            pN0    319     32.75          60.27     32.75          60.27
        pN0(sn)    168     17.25          77.52     17.25          77.52
            pN1     46      4.72          82.24      4.72          82.24
      pN1(ONSA)      1      0.10          82.34      0.10          82.34
        pN1(sn)     18      1.85          84.19      1.85          84.19
           pN1a     47      4.83          89.01      4.83          89.01
       pN1a(sn)     13      1.33          90.35      1.33          90.35
           pN1c      2      0.21          90.55      0.21          90.55
          pN1mi     13      1.33          91.89      1.33          91.89
      pN1mi(sn)      7      0.72          92.61      0.72          92.61
            pN2     17      1.75          94.35      1.75          94.35
           pN2a     17      1.75          96.10      1.75          96.10
            pN3     10      1.03          97.13      1.03          97.13
           pN3a      5      0.51          97.64      0.51          97.64
            pNX     23      2.36         100.00      2.36         100.00
           &lt;NA&gt;      0                               0.00         100.00
          Total    974    100.00         100.00    100.00         100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb228"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb228-1"><a href="#cb228-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="fu">length</span>(missing_codes)<span class="sc">&gt;</span><span class="dv">0</span>){</span>
<span id="cb228-2"><a href="#cb228-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste</span>(<span class="fu">length</span>(missing_codes), <span class="st">"Missing Codes"</span>), <span class="fu">paste</span>(<span class="st">"Missing Codes:"</span>, <span class="fu">paste</span>(missing_codes, <span class="at">collapse =</span> <span class="st">", "</span>)), <span class="at">sep =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb228-3"><a href="#cb228-3" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb228-4"><a href="#cb228-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"No Missing Codes"</span>)</span>
<span id="cb228-5"><a href="#cb228-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>87 Missing Codes
Missing Codes: N0(SNB), pN0sn, pNIbiv, pN1(mi), Pn1, N1 micro, pN1mic(SN), N1a(mic)(sn), ypN2a, N0sn, pN, N1(SNB OSNA), pN(ONSA)1, pNx, ypN2, ypN3a, pN(OSNA)1, pN0(mo1-)sn, pNo(sn), 0, N1mc(sn), pT0(sn), pN1mic, ypN1, Pnx, yN0, ypN0sn, ypN0(sn), Nx, pN0(0/3), pN(sn), pNO(sn), ypN0, pN1sn, Pn2(9/11), Pn0, N0 (sn), pN1(2/35), L1 N0, Pn0(SN), pN1mic(sn), pN1osna(mic), pN0(sn)(OSNA), pN(sn)0, pN2s, N0(2sn+3non-sn), NO(sn), pyN0, pN(sn)OSNA, pN0(sn)OSNA, pN1(sn)(mol+), pMx, N1(mi), N1mic, pN0(sn0, pN0(i+), ypN1mi(sn), pNoi+(sn), pN0(s), pN(sn)1, Pn0(0/9), ypN1a, pN1/3(sn), N1(1mic; 1itc), pN(sn)OSNAx, pN(OSNA)1mic, pN0(i+)(sn), pN0(sn)(mol-), N1(SNB by OSNA), ypN1(sn), pTN0(sn), pN0 (sn), pN0(sn)(ONSA), pN0 (TNM7), ypN1a(sn), N(sn)0, N(sn)1, pN0(SN), N1a(SNB), ypN0 (0/1), pN(OSNA)0, pN0(0/3)(sn), pN0(ans), N0(OSNA), N0 (OSNA), pNmi, yN1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb230"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb230-1"><a href="#cb230-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ctable</span>(hpdata<span class="sc">$</span>NStage, hpdata<span class="sc">$</span>NStageMod, <span class="at">useNA =</span> <span class="st">"always"</span>, <span class="at">prop =</span> <span class="st">"n"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Cross-Tabulation  
NStage * NStageMod  
Data Frame: hpdata  

----------------- ----------- ----- ----- ---- ---- ---- ---- ------ -------
                    NStageMod    N0    N1   N2   N3   Nx   NX   &lt;NA&gt;   Total
           NStage                                                           
                0                 1     0    0    0    0    0      0       1
            L1 N0                 1     0    0    0    0    0      0       1
           N(sn)0                 1     0    0    0    0    0      0       1
           N(sn)1                 0     1    0    0    0    0      0       1
               N0               143     0    0    0    0    0      0     143
        N0 (OSNA)                 1     0    0    0    0    0      0       1
          N0 (sn)                 1     0    0    0    0    0      0       1
  N0(2sn+3non-sn)                 1     0    0    0    0    0      0       1
         N0(OSNA)                 1     0    0    0    0    0      0       1
           N0(sn)                42     0    0    0    0    0      0      42
          N0(SNB)                 2     0    0    0    0    0      0       2
             N0sn                 1     0    0    0    0    0      0       1
               N1                 0    44    0    0    0    0      0      44
         N1 micro                 0     1    0    0    0    0      0       1
   N1(1mic; 1itc)                 0     1    0    0    0    0      0       1
           N1(mi)                 0     1    0    0    0    0      0       1
           N1(sn)                 0     3    0    0    0    0      0       3
  N1(SNB by OSNA)                 0     1    0    0    0    0      0       1
     N1(SNB OSNA)                 0     1    0    0    0    0      0       1
              N1a                 0     5    0    0    0    0      0       5
     N1a(mic)(sn)                 0     1    0    0    0    0      0       1
          N1a(sn)                 0     3    0    0    0    0      0       3
         N1a(SNB)                 0     1    0    0    0    0      0       1
              N1c                 0     1    0    0    0    0      0       1
         N1mc(sn)                 0     1    0    0    0    0      0       1
             N1mi                 0     4    0    0    0    0      0       4
            N1mic                 0     1    0    0    0    0      0       1
               N2                 0     0   11    0    0    0      0      11
              N2a                 0     0    2    0    0    0      0       2
               N3                 0     0    0    1    0    0      0       1
              N3a                 0     0    0    3    0    0      0       3
           NO(sn)                 1     0    0    0    0    0      0       1
               Nx                 0     0    0    0    4   11      0      15
               NX                 0     0    0    0    6    0      0       6
              pMx                 0     0    0    0    0    0      1       1
               pN                 0     0    0    0    0    0      1       1
        pN(ONSA)1                 0     1    0    0    0    0      0       1
        pN(OSNA)0                 0     0    0    0    0    0      1       1
        pN(OSNA)1                 0     0    0    0    0    0      1       1
     pN(OSNA)1mic                 0     0    0    0    0    0      1       1
           pN(sn)                 0     0    0    0    0    0      3       3
          pN(sn)0                 2     0    0    0    0    0      0       2
          pN(sn)1                 0     1    0    0    0    0      0       1
       pN(sn)OSNA                 0     0    0    0    0    0      1       1
      pN(sn)OSNAx                 0     0    0    0    1    0      0       1
              pN0               319     0    0    0    0    0      0     319
              Pn0                 4     0    0    0    0    0      0       4
         pN0 (sn)                 1     0    0    0    0    0      0       1
       pN0 (TNM7)                 1     0    0    0    0    0      0       1
         pN0(0/3)                 1     0    0    0    0    0      0       1
     pN0(0/3)(sn)                 1     0    0    0    0    0      0       1
         Pn0(0/9)                 1     0    0    0    0    0      0       1
         pN0(ans)                 1     0    0    0    0    0      0       1
          pN0(i+)                 3     0    0    0    0    0      0       3
      pN0(i+)(sn)                 1     0    0    0    0    0      0       1
      pN0(mo1-)sn                 1     0    0    0    0    0      0       1
           pN0(s)                 2     0    0    0    0    0      0       2
          pN0(sn)               168     0    0    0    0    0      0     168
          pN0(SN)                 1     0    0    0    0    0      0       1
          Pn0(SN)                 1     0    0    0    0    0      0       1
    pN0(sn)(mol-)                 1     0    0    0    0    0      0       1
    pN0(sn)(ONSA)                 1     0    0    0    0    0      0       1
    pN0(sn)(OSNA)                 1     0    0    0    0    0      0       1
      pN0(sn)OSNA                 1     0    0    0    0    0      0       1
          pN0(sn0                 1     0    0    0    0    0      0       1
            pN0sn                 6     0    0    0    0    0      0       6
              pN1                 0    46    0    0    0    0      0      46
              Pn1                 0     1    0    0    0    0      0       1
        pN1(2/35)                 0     1    0    0    0    0      0       1
          pN1(mi)                 0     8    0    0    0    0      0       8
        pN1(ONSA)                 0     1    0    0    0    0      0       1
          pN1(sn)                 0    18    0    0    0    0      0      18
    pN1(sn)(mol+)                 0     1    0    0    0    0      0       1
        pN1/3(sn)                 0     1    0    0    0    0      0       1
             pN1a                 0    47    0    0    0    0      0      47
         pN1a(sn)                 0    13    0    0    0    0      0      13
             pN1c                 0     2    0    0    0    0      0       2
            pN1mi                 0    13    0    0    0    0      0      13
        pN1mi(sn)                 0     7    0    0    0    0      0       7
           pN1mic                 0     3    0    0    0    0      0       3
       pN1mic(sn)                 0     1    0    0    0    0      0       1
       pN1mic(SN)                 0     1    0    0    0    0      0       1
     pN1osna(mic)                 0     1    0    0    0    0      0       1
            pN1sn                 0     2    0    0    0    0      0       2
              pN2                 0     0   17    0    0    0      0      17
        Pn2(9/11)                 0     0    1    0    0    0      0       1
             pN2a                 0     0   17    0    0    0      0      17
             pN2s                 0     0    1    0    0    0      0       1
              pN3                 0     0    0   10    0    0      0      10
             pN3a                 0     0    0    5    0    0      0       5
           pNIbiv                 0     1    0    0    0    0      0       1
             pNmi                 0     0    0    0    1    0      0       1
          pNo(sn)                 0     0    0    0    0    0      1       1
          pNO(sn)                 1     0    0    0    0    0      0       1
        pNoi+(sn)                 0     0    0    0    0    0      1       1
              pNx                 0     0    0    0    7   22      0      29
              pNX                 0     0    0    0   14    9      0      23
              Pnx                 0     0    0    0    0    1      0       1
          pT0(sn)                 0     0    0    0    0    0      1       1
         pTN0(sn)                 1     0    0    0    0    0      0       1
             pyN0                 1     0    0    0    0    0      0       1
              yN0                 1     0    0    0    0    0      0       1
              yN1                 0     1    0    0    0    0      0       1
             ypN0                20     0    0    0    0    0      0      20
       ypN0 (0/1)                 1     0    0    0    0    0      0       1
         ypN0(sn)                 1     0    0    0    0    0      0       1
           ypN0sn                 3     0    0    0    0    0      0       3
             ypN1                 0     3    0    0    0    0      0       3
         ypN1(sn)                 0     1    0    0    0    0      0       1
            ypN1a                 0     2    0    0    0    0      0       2
        ypN1a(sn)                 0     1    0    0    0    0      0       1
       ypN1mi(sn)                 0     1    0    0    0    0      0       1
             ypN2                 0     0    1    0    0    0      0       1
            ypN2a                 0     0    5    0    0    0      0       5
            ypN3a                 0     0    0    3    0    0      0       3
             &lt;NA&gt;                 0     0    0    0    0    0   1698    1698
            Total               744   249   55   22   33   43   1710    2856
----------------- ----------- ----- ----- ---- ---- ---- ---- ------ -------</code></pre>
</div>
</div>
</section>
<section id="section-53" class="level5">
<h5 class="anchored" data-anchor-id="section-53"></h5>
</section>
<section id="mstage" class="level5">
<h5 class="anchored" data-anchor-id="mstage">MStage</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb232"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb232-1"><a href="#cb232-1" aria-hidden="true" tabindex="-1"></a>preMstage <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"c"</span>, <span class="st">"p"</span>, <span class="st">""</span>)</span>
<span id="cb232-2"><a href="#cb232-2" aria-hidden="true" tabindex="-1"></a>mainMstage <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"M0"</span>, <span class="st">"M0(i+)"</span>, <span class="st">"M1"</span>)</span>
<span id="cb232-3"><a href="#cb232-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-4"><a href="#cb232-4" aria-hidden="true" tabindex="-1"></a>Mstagecodes <span class="ot">&lt;-</span> <span class="fu">character</span>(<span class="dv">0</span>)</span>
<span id="cb232-5"><a href="#cb232-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-6"><a href="#cb232-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(pre <span class="cf">in</span> preMstage){</span>
<span id="cb232-7"><a href="#cb232-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(main <span class="cf">in</span> mainMstage){</span>
<span id="cb232-8"><a href="#cb232-8" aria-hidden="true" tabindex="-1"></a>    Mstagecodes <span class="ot">&lt;-</span> <span class="fu">append</span>(Mstagecodes, <span class="fu">paste0</span>(pre, main))</span>
<span id="cb232-9"><a href="#cb232-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb232-10"><a href="#cb232-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb232-11"><a href="#cb232-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-12"><a href="#cb232-12" aria-hidden="true" tabindex="-1"></a>missing_codes <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(<span class="fu">unique</span>(hpdata<span class="sc">$</span>MStage)[<span class="sc">!</span><span class="fu">is.na</span>(<span class="fu">unique</span>(hpdata<span class="sc">$</span>MStage))], Mstagecodes)</span>
<span id="cb232-13"><a href="#cb232-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-14"><a href="#cb232-14" aria-hidden="true" tabindex="-1"></a><span class="fu">freq</span>(hpdata<span class="sc">$</span>MStage[hpdata<span class="sc">$</span>MStage<span class="sc">%in%</span>Mstagecodes])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  
hpdata$MStage  
Label: Metastasis staging, describes whether the cancer has spread to a different part of the body.  
Type: Character  

              Freq   % Valid   % Valid Cum.   % Total   % Total Cum.
----------- ------ --------- -------------- --------- --------------
         M0     14     77.78          77.78     77.78          77.78
         M1      1      5.56          83.33      5.56          83.33
        pM0      3     16.67         100.00     16.67         100.00
       &lt;NA&gt;      0                               0.00         100.00
      Total     18    100.00         100.00    100.00         100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb234"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb234-1"><a href="#cb234-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="fu">length</span>(missing_codes)<span class="sc">&gt;</span><span class="dv">0</span>){</span>
<span id="cb234-2"><a href="#cb234-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste</span>(<span class="fu">length</span>(missing_codes), <span class="st">"Missing Codes"</span>), <span class="fu">paste</span>(<span class="st">"Missing Codes:"</span>, <span class="fu">paste</span>(missing_codes, <span class="at">collapse =</span> <span class="st">", "</span>)), <span class="at">sep =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb234-3"><a href="#cb234-3" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb234-4"><a href="#cb234-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"No Missing Codes"</span>)</span>
<span id="cb234-5"><a href="#cb234-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>17 Missing Codes
Missing Codes: pMX, Mx, MX, pMx, ptMX, ypMx, MX G3, Pmx, pMX (stage1), MxG1, NA, ypM0, pMx (Stage 1), MX L1G2, ypMX, pMx (stage1), M0  IIB</code></pre>
</div>
<div class="sourceCode cell-code" id="cb236"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb236-1"><a href="#cb236-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ctable</span>(hpdata<span class="sc">$</span>MStage, hpdata<span class="sc">$</span>MStageMod, <span class="at">useNA =</span> <span class="st">"always"</span>, <span class="at">prop =</span> <span class="st">"n"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Cross-Tabulation  
MStage * MStageMod  
Data Frame: hpdata  

--------------- ----------- ---- ---- ----- ----- ------ -------
                  MStageMod   M0   M1    Mx    MX   &lt;NA&gt;   Total
         MStage                                                 
             M0               14    0     0     0      0      14
        M0  IIB                1    0     0     0      0       1
             M1                0    1     0     0      0       1
             Mx                0    0    57    71      0     128
             MX                0    0    83     6      0      89
          MX G3                0    0     1     0      0       1
        MX L1G2                0    0     1     0      0       1
           MxG1                0    0     1     0      0       1
             NA                0    0     0     0      2       2
            pM0                3    0     0     0      0       3
            pMx                0    0    43   105      0     148
            pMX                0    0    84     7      0      91
            Pmx                0    0     6     0      0       6
  pMx (Stage 1)                0    0     1     0      0       1
   pMx (stage1)                0    0     1     0      0       1
   pMX (stage1)                0    0     1     0      0       1
           ptMX                0    0     1     0      0       1
           ypM0                2    0     0     0      0       2
           ypMx                0    0     2     5      0       7
           ypMX                0    0     1     2      0       3
           &lt;NA&gt;                2    2     0     0   2350    2354
          Total               22    3   283   196   2352    2856
--------------- ----------- ---- ---- ----- ----- ------ -------</code></pre>
</div>
</div>
</section>
<section id="section-54" class="level5">
<h5 class="anchored" data-anchor-id="section-54"></h5>
</section>
</section>
<section id="excision-status" class="level4">
<h4 class="anchored" data-anchor-id="excision-status">Excision Status</h4>
<section id="section-55" class="level5">
<h5 class="anchored" data-anchor-id="section-55"></h5>
</section>
<section id="excisionmargin" class="level5">
<h5 class="anchored" data-anchor-id="excisionmargin">ExcisionMargin</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb238"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb238-1"><a href="#cb238-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"ExcisionMargin"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                                       Freq   % Valid   % Total
------------------------------------ ------ --------- ---------
      Does not reach relevant margin   1810     80.88     63.38
             Reaches relevant margin    428     19.12     14.99
                                &lt;NA&gt;    618               21.64
                               Total   2856    100.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb240"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb240-1"><a href="#cb240-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"ExcisionMargin"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>No Missing Codes</code></pre>
</div>
</div>
</section>
<section id="section-56" class="level5">
<h5 class="anchored" data-anchor-id="section-56"></h5>
</section>
<section id="closestrelevantmargin" class="level5">
<h5 class="anchored" data-anchor-id="closestrelevantmargin">ClosestRelevantMargin</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb242"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb242-1"><a href="#cb242-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(hpdata<span class="sc">$</span>ClosestRelevantMargin)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
  0.020   1.000   3.000   4.686   6.000  55.000    1109 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb244"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb244-1"><a href="#cb244-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(hpdata<span class="sc">$</span>ClosestRelevantMargin, <span class="at">main =</span> <span class="st">"Closest Relevant Margin"</span>, <span class="at">xlab =</span> <span class="st">"Distance (mm)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Histopathology-QC_files/figure-html/unnamed-chunk-55-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="section-57" class="level5">
<h5 class="anchored" data-anchor-id="section-57"></h5>
</section>
<section id="er_status" class="level5">
<h5 class="anchored" data-anchor-id="er_status">ER_Status</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb245"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb245-1"><a href="#cb245-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"ER_Status"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                      Freq   % Valid   % Total
------------------- ------ --------- ---------
           Positive   1960     83.51     68.63
           Negative    367     15.64     12.85
      Not Performed     20      0.85      0.70
               &lt;NA&gt;    509               17.82
              Total   2856    100.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb247"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb247-1"><a href="#cb247-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"ER_Status"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>No Missing Codes</code></pre>
</div>
</div>
</section>
<section id="section-58" class="level5">
<h5 class="anchored" data-anchor-id="section-58"></h5>
</section>
<section id="er_type" class="level5">
<h5 class="anchored" data-anchor-id="er_type">ER_Type</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb249"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb249-1"><a href="#cb249-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"ER_Type"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                           Freq   % Valid   % Total
------------------------ ------ --------- ---------
      Quick Alfred Score   1823    93.153    63.831
          Combined Score    119     6.081     4.167
       % Positive Nuclei     13     0.664     0.455
           Mitch Dowsett      1     0.051     0.035
               Intensity      1     0.051     0.035
                    &lt;NA&gt;    899              31.478
                   Total   2856   100.000   100.000</code></pre>
</div>
<div class="sourceCode cell-code" id="cb251"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb251-1"><a href="#cb251-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"ER_Type"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>No Missing Codes</code></pre>
</div>
</div>
</section>
<section id="section-59" class="level5">
<h5 class="anchored" data-anchor-id="section-59"></h5>
</section>
<section id="pr_status" class="level5">
<h5 class="anchored" data-anchor-id="pr_status">PR_Status</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb253"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb253-1"><a href="#cb253-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"PR_Status"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                      Freq   % Valid   % Total
------------------- ------ --------- ---------
           Positive   1046     62.90     36.62
           Negative    522     31.39     18.28
      Not performed     95      5.71      3.33
               &lt;NA&gt;   1193               41.77
              Total   2856    100.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb255"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb255-1"><a href="#cb255-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"PR_Status"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1 Missing Codes
Missing Codes: p</code></pre>
</div>
</div>
</section>
<section id="section-60" class="level5">
<h5 class="anchored" data-anchor-id="section-60"></h5>
</section>
<section id="pr_type" class="level5">
<h5 class="anchored" data-anchor-id="pr_type">PR_Type</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb257"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb257-1"><a href="#cb257-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"Pr_Type"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                           Freq   % Valid   % Total
------------------------ ------ --------- ---------
      Quick Alfred Score   1124    91.680    39.356
          Combined Score     87     7.096     3.046
       % Positive Nuclei     12     0.979     0.420
               Intensity      2     0.163     0.070
           Mitch Dowsett      1     0.082     0.035
                    &lt;NA&gt;   1630              57.073
                   Total   2856   100.000   100.000</code></pre>
</div>
<div class="sourceCode cell-code" id="cb259"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb259-1"><a href="#cb259-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"Pr_Type"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>No Missing Codes</code></pre>
</div>
</div>
</section>
<section id="section-61" class="level5">
<h5 class="anchored" data-anchor-id="section-61"></h5>
</section>
<section id="her2_status" class="level5">
<h5 class="anchored" data-anchor-id="her2_status">HER2_Status</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb261"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb261-1"><a href="#cb261-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"HER2_Status"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                      Freq   % Valid   % Total
------------------- ------ --------- ---------
           Negative   1695     81.77     59.35
           Positive    313     15.10     10.96
      Not Performed     50      2.41      1.75
         Borderline     15      0.72      0.53
               &lt;NA&gt;    783               27.42
              Total   2856    100.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb263"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb263-1"><a href="#cb263-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"HER2_Status"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>No Missing Codes</code></pre>
</div>
</div>
</section>
<section id="section-62" class="level5">
<h5 class="anchored" data-anchor-id="section-62"></h5>
</section>
<section id="her2_score" class="level5">
<h5 class="anchored" data-anchor-id="her2_score">HER2_Score</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb265"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb265-1"><a href="#cb265-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq</span>(hpdata<span class="sc">$</span>HER2_Score, <span class="at">cumul =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  
hpdata$HER2_Score  
Label: HER2 Score  as reported  
Type: Character  

              Freq   % Valid   % Total
----------- ------ --------- ---------
          0    361    25.603    12.640
       0/1+      4     0.284     0.140
       1/2+      2     0.142     0.070
         1+    555    39.362    19.433
      1+/2+      2     0.142     0.070
       2/3+      2     0.142     0.070
         2+    280    19.858     9.804
      2+/3+      3     0.213     0.105
          3      1     0.071     0.035
         3+    200    14.184     7.003
       &lt;NA&gt;   1446              50.630
      Total   2856   100.000   100.000</code></pre>
</div>
</div>
<p>No current codes given for this.</p>
</section>
<section id="section-63" class="level5">
<h5 class="anchored" data-anchor-id="section-63"></h5>
</section>
<section id="her2_fish" class="level5">
<h5 class="anchored" data-anchor-id="her2_fish">HER2_FISH</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb267"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb267-1"><a href="#cb267-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"HER2_FISH"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                      Freq   % Valid   % Total
------------------- ------ --------- ---------
      Non Amplified    171     49.00      5.99
           Negative     80     22.92      2.80
          Amplified     53     15.19      1.86
      Not Performed     27      7.74      0.95
           Positive     18      5.16      0.63
               &lt;NA&gt;   2507               87.78
              Total   2856    100.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb269"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb269-1"><a href="#cb269-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"HER2_FISH"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>No Missing Codes</code></pre>
</div>
</div>
</section>
<section id="section-64" class="level5">
<h5 class="anchored" data-anchor-id="section-64"></h5>
</section>
<section id="ck56_status" class="level5">
<h5 class="anchored" data-anchor-id="ck56_status">CK56_Status</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb271"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb271-1"><a href="#cb271-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"CK56_Status"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                      Freq   % Valid   % Total
------------------- ------ --------- ---------
           Positive     16     53.33      0.56
           Negative     14     46.67      0.49
      Not performed      0      0.00      0.00
               &lt;NA&gt;   2826               98.95
              Total   2856    100.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb273"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb273-1"><a href="#cb273-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"CK56_Status"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>No Missing Codes</code></pre>
</div>
</div>
</section>
<section id="section-65" class="level5">
<h5 class="anchored" data-anchor-id="section-65"></h5>
</section>
<section id="ck56_type" class="level5">
<h5 class="anchored" data-anchor-id="ck56_type">CK56_Type</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb275"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb275-1"><a href="#cb275-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"CK56_Type"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

                              Freq   % Valid   % Total
--------------------------- ------ --------- ---------
      Intensity of staining      2    100.00      0.07
         Quick Allred Score      0      0.00      0.00
          % Positive Nuclei      0      0.00      0.00
                       &lt;NA&gt;   2854               99.93
                      Total   2856    100.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb277"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb277-1"><a href="#cb277-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"CK56_Type"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>No Missing Codes</code></pre>
</div>
</div>
</section>
<section id="section-66" class="level5">
<h5 class="anchored" data-anchor-id="section-66"></h5>
</section>
<section id="ki67" class="level5">
<h5 class="anchored" data-anchor-id="ki67">Ki67</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb279"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb279-1"><a href="#cb279-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(hpdata<span class="sc">$</span>Ki67, <span class="at">cumul =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
   2.00    5.00   15.00   18.51   25.00   80.00    2780 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb281"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb281-1"><a href="#cb281-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(hpdata<span class="sc">$</span>Ki67, <span class="at">main =</span> <span class="st">"Percentage Positive Ki67 Nuclei"</span>, <span class="at">xlab =</span> <span class="st">"Percentage (%)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Histopathology-QC_files/figure-html/unnamed-chunk-65-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="section-67" class="level5">
<h5 class="anchored" data-anchor-id="section-67"></h5>
</section>
<section id="icdmorphologycode" class="level5">
<h5 class="anchored" data-anchor-id="icdmorphologycode">ICDMorphologyCode</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb282"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb282-1"><a href="#cb282-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq</span>(hpdata<span class="sc">$</span>ICDMorphologyCode, <span class="at">cumul =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  
hpdata$ICDMorphologyCode  
Label: Intl Classification of Diseases Morphology Code,  (ICD-O) when incicated in the report  
Type: Character  

               Freq   % Valid   % Total
------------ ------ --------- ---------
      M09450      2     0.307     0.070
      M09460      1     0.153     0.035
      M80003      1     0.153     0.035
      M80013      1     0.153     0.035
      M80102      5     0.767     0.175
      M80103     14     2.147     0.490
      M80106      4     0.613     0.140
      M80502      1     0.153     0.035
      M81233      1     0.153     0.035
      M81402      1     0.153     0.035
      M81403     26     3.988     0.910
      M81406      2     0.307     0.070
      M82013      2     0.307     0.070
      M82113      5     0.767     0.175
      M82302      3     0.460     0.105
      M84803      5     0.767     0.175
      m85002      1     0.153     0.035
      M85002     78    11.963     2.731
      M85003    410    62.883    14.356
      M85005      1     0.153     0.035
      M85032      1     0.153     0.035
      M85043      1     0.153     0.035
      M85202      5     0.767     0.175
      M85203     67    10.276     2.346
      M85213     10     1.534     0.350
      M85223      2     0.307     0.070
      M85403      2     0.307     0.070
        &lt;NA&gt;   2204              77.171
       Total   2856   100.000   100.000</code></pre>
</div>
<div class="sourceCode cell-code" id="cb284"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb284-1"><a href="#cb284-1" aria-hidden="true" tabindex="-1"></a>firstcode <span class="ot">&lt;-</span> <span class="fu">str_sub</span>(hpdata<span class="sc">$</span>ICDMorphologyCode, <span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb284-2"><a href="#cb284-2" aria-hidden="true" tabindex="-1"></a>code <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">str_sub</span>(hpdata<span class="sc">$</span>ICDMorphologyCode, <span class="dv">2</span>, <span class="sc">-</span><span class="dv">1</span>))</span>
<span id="cb284-3"><a href="#cb284-3" aria-hidden="true" tabindex="-1"></a>codemask <span class="ot">&lt;-</span> (code<span class="sc">&gt;</span><span class="dv">80000</span> <span class="sc">&amp;</span> code <span class="sc">&lt;</span><span class="dv">90550</span>)</span>
<span id="cb284-4"><a href="#cb284-4" aria-hidden="true" tabindex="-1"></a>missing_MCodes <span class="ot">&lt;-</span> hpdata<span class="sc">$</span>ICDMorphologyCode[<span class="fu">which</span>(<span class="sc">!</span><span class="fu">is.na</span>(hpdata<span class="sc">$</span>ICDMorphologyCode) <span class="sc">&amp;</span> (firstcode<span class="sc">!=</span><span class="st">"M"</span> <span class="sc">|</span> codemask<span class="sc">==</span><span class="dv">0</span>))]</span>
<span id="cb284-5"><a href="#cb284-5" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">paste</span>(<span class="fu">length</span>(missing_MCodes), <span class="st">"Missing Codes"</span>), <span class="fu">paste</span>(<span class="st">"Missing Codes:"</span>, <span class="fu">paste</span>(missing_MCodes, <span class="at">collapse =</span> <span class="st">", "</span>)), <span class="at">sep =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>4 Missing Codes
Missing Codes: M09460, M09450, M09450, m85002</code></pre>
</div>
</div>
<p>Would like a more thorough ICDM system implemented here. Will look into it.</p>
</section>
<section id="section-68" class="level5">
<h5 class="anchored" data-anchor-id="section-68"></h5>
</section>
<section id="brca1" class="level5">
<h5 class="anchored" data-anchor-id="brca1">BrCa1</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb286"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb286-1"><a href="#cb286-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"BrCa1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

              Freq   % Valid   % Total
----------- ------ --------- ---------
        Yes      7    100.00      0.25
       &lt;NA&gt;   2849               99.75
      Total   2856    100.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb288"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb288-1"><a href="#cb288-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"BrCa1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>No Missing Codes</code></pre>
</div>
</div>
</section>
<section id="section-69" class="level5">
<h5 class="anchored" data-anchor-id="section-69"></h5>
</section>
<section id="brca2" class="level5">
<h5 class="anchored" data-anchor-id="brca2">BrCa2</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb290"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb290-1"><a href="#cb290-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq_labelled_factor</span>(<span class="st">"BrCa2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Frequencies  

              Freq   % Valid   % Total
----------- ------ --------- ---------
        Yes      8    100.00      0.28
       &lt;NA&gt;   2848               99.72
      Total   2856    100.00    100.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb292"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb292-1"><a href="#cb292-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_missing_factors</span>(<span class="st">"BrCa2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>No Missing Codes</code></pre>
</div>
</div>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>